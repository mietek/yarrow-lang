<HTML>
<HEAD>
<TITLE>lolplus/axiomatizing (with proofs)</TITLE>
</HEAD>
<BODY BGCOLOR="#FFFFFF", TEXT="#000000">
<PRE><FONT COLOR="#000000"></FONT><FONT COLOR="#000000">-- File: axiomatizing
</FONT><FONT COLOR="#000000">
</FONT><FONT COLOR="#000000">-- In this file we postulate only the axiom of choice and the existence of
</FONT><FONT COLOR="#000000">-- quotient and subset types, and show how to prove the existence of quotient
</FONT><FONT COLOR="#000000">-- and subset algebras from these axioms.
</FONT><FONT COLOR="#000000">-- This file is divided into three parts.
</FONT><FONT COLOR="#000000">-- 1. The axiom of choice and the axioms stating the existence of quotient
</FONT><FONT COLOR="#000000">--    and subset types. This corresponds to definition 6.8.1.3 on page 194.
</FONT><FONT COLOR="#000000">--    We also show that the existence of QuotSubset types follows from the
</FONT><FONT COLOR="#000000">--    last two axioms.
</FONT><FONT COLOR="#000000">-- 2. We prove the existence of quotient and subset algebras for all
</FONT><FONT COLOR="#000000">--    simply-typed interfaces (including higher-order ones). This corresponds
</FONT><FONT COLOR="#000000">--    to Conjectures 6.8.2.1, 6.8.2.2 and 6.8.2.6
</FONT><FONT COLOR="#000000">-- 3. We prove the existence of quotient and subset algebras for first-order
</FONT><FONT COLOR="#000000">--    interfaces. This does not follow directly from part 2, since the
</FONT><FONT COLOR="#000000">--    theorems that state the existence are formulated quite differently.
</FONT><FONT COLOR="#000000">--    This corresponds to Theorem 6.8.1.4.
</FONT><FONT COLOR="#000000">
</FONT><FONT COLOR="#000000">
</FONT><FONT COLOR="#000000">Path "../lol"
</FONT><FONT COLOR="#000000">Path "../lolExtra"
</FONT><FONT COLOR="#000000">Load "lambdaLplus"
</FONT><FONT COLOR="#000000">Load "parametricity"
</FONT><FONT COLOR="#000000">
</FONT><FONT COLOR="#000000">
</FONT><FONT COLOR="#000000">----------------------
</FONT><FONT COLOR="#000000">----------------------
</FONT><FONT COLOR="#000000">--                  --
</FONT><FONT COLOR="#000000">--  1. A X I O M S  --
</FONT><FONT COLOR="#000000">--                  --
</FONT><FONT COLOR="#000000">----------------------
</FONT><FONT COLOR="#000000">----------------------
</FONT><FONT COLOR="#000000">
</FONT><FONT COLOR="#FF0000">Var axiom_choice :  @A,B:*s.@P:A-&gt;B-&gt;*p. 
</FONT><FONT COLOR="#FF0000">                    (@x:A.Ex y:B. P x y) -&gt; 
</FONT><FONT COLOR="#FF0000">                     Ex f:A-&gt;B. @x:A. P x (f x)
</FONT><FONT COLOR="#000000">
</FONT><FONT COLOR="#0000FF">Def IsQuotType := \R:*s. \(~~):R-&gt;R-&gt;*p. \Q:*s.
</FONT><FONT COLOR="#0000FF">               Ex surj:R-&gt;Q.
</FONT><FONT COLOR="#0000FF">                (@r,r':R. r ~~ r' &lt;=&gt; surj r = surj r') /\
</FONT><FONT COLOR="#0000FF">                IsSurjection surj :
</FONT><FONT COLOR="#0000FF">              @R:*s. (R-&gt;R-&gt;*p) -&gt; *s -&gt; *p
</FONT><FONT COLOR="#000000">
</FONT><FONT COLOR="#FF0000">Var exis_QuotType : @R:*s. @(~~):R-&gt;R-&gt;*p. IsER (~~) -&gt;
</FONT><FONT COLOR="#FF0000">                 ExK Q:*s.
</FONT><FONT COLOR="#FF0000">                 IsQuotType R (~~) Q
</FONT><FONT COLOR="#000000">
</FONT><FONT COLOR="#0000FF">Def IsSubsetType := \R:*s. \Inv:R-&gt;*p. \S:*s.
</FONT><FONT COLOR="#0000FF">                 Ex inj:S-&gt;R.
</FONT><FONT COLOR="#0000FF">                  IsInjection inj /\
</FONT><FONT COLOR="#0000FF">                  (Inv &lt;==&gt; Image inj) :
</FONT><FONT COLOR="#0000FF">                @R:*s. (R-&gt;*p) -&gt; *s -&gt; *p
</FONT><FONT COLOR="#000000">
</FONT><FONT COLOR="#FF0000">Var exis_SubsetType : @R:*s. @Inv:R-&gt;*p.
</FONT><FONT COLOR="#FF0000">                   ExK S:*s.
</FONT><FONT COLOR="#FF0000">                   IsSubsetType R Inv S
</FONT><FONT COLOR="#000000">
</FONT><FONT COLOR="#0000FF">Def IsQuotSubsetType := \R:*s. \(~~):R-&gt;R-&gt;*p. \Inv:R-&gt;*p. \Q:*s.
</FONT><FONT COLOR="#0000FF">                     ExR rel:R-&gt;Q-&gt;*p.
</FONT><FONT COLOR="#0000FF">                     (Inv &lt;==&gt; Dom rel) /\
</FONT><FONT COLOR="#0000FF">                     (@q:Q. Ex r:R. rel r q) /\
</FONT><FONT COLOR="#0000FF">                     (@r,r':R. @q,q':Q. rel r q -&gt; rel r' q' -&gt; 
</FONT><FONT COLOR="#0000FF">                                        r~~r' &lt;=&gt; q=q') :
</FONT><FONT COLOR="#0000FF">                     @R:*s. (R-&gt;R-&gt;*p) -&gt; (R-&gt;*p) -&gt; *s -&gt; *p
</FONT><FONT COLOR="#000000">
</FONT><FONT COLOR="#0000FF">Prove exis_QuotSubsetType : @R:*s. @(~~):R-&gt;R-&gt;*p. @Inv:R-&gt;*p.
</FONT><FONT COLOR="#0000FF">                     IsERon (~~) Inv -&gt; 
</FONT><FONT COLOR="#0000FF">                     ExK Q:*s.
</FONT><FONT COLOR="#0000FF">                     IsQuotSubsetType R (~~) Inv Q
</FONT><FONT COLOR="#000000">Intros
</FONT><FONT COLOR="#000000">ExistsE exis_SubsetType On Inv
</FONT><FONT COLOR="#000000">Unfold IsSubsetType In H2
</FONT><FONT COLOR="#000000">ExistsE H2
</FONT><FONT COLOR="#000000">AndE H3
</FONT><FONT COLOR="#000000">First IsER (\s1,s2:S. inj s1 ~~ inj s2)
</FONT><FONT COLOR="#000000">Unfold IsER
</FONT><FONT COLOR="#000000">Unfold IsERon In H
</FONT><FONT COLOR="#000000">AndE H
</FONT><FONT COLOR="#000000">AndE H7
</FONT><FONT COLOR="#000000">AndI
</FONT><FONT COLOR="#000000">Intro
</FONT><FONT COLOR="#000000">Apply H6
</FONT><FONT COLOR="#000000">Rewrite H5
</FONT><FONT COLOR="#000000">Apply Image_f_f_x
</FONT><FONT COLOR="#000000">AndI
</FONT><FONT COLOR="#000000">Intros 2
</FONT><FONT COLOR="#000000">Apply H8
</FONT><FONT COLOR="#000000">Rewrite H5
</FONT><FONT COLOR="#000000">Apply Image_f_f_x
</FONT><FONT COLOR="#000000">Rewrite H5
</FONT><FONT COLOR="#000000">Apply Image_f_f_x
</FONT><FONT COLOR="#000000">Intros 3
</FONT><FONT COLOR="#000000">Apply H9
</FONT><FONT COLOR="#000000">Rewrite H5 Then Apply Image_f_f_x
</FONT><FONT COLOR="#000000">Rewrite H5 Then Apply Image_f_f_x
</FONT><FONT COLOR="#000000">Rewrite H5 Then Apply Image_f_f_x
</FONT><FONT COLOR="#000000">Intro
</FONT><FONT COLOR="#000000">ExistsE exis_QuotType On H6
</FONT><FONT COLOR="#000000">ExistsI Q
</FONT><FONT COLOR="#000000">Unfold IsQuotType In H8
</FONT><FONT COLOR="#000000">ExistsE H8
</FONT><FONT COLOR="#000000">AndE H9
</FONT><FONT COLOR="#000000">Unfold IsQuotSubsetType
</FONT><FONT COLOR="#000000">ExistsI \r:R.\q:Q. Ex s:S. r = inj s /\ q = surj s
</FONT><FONT COLOR="#000000">Repeat AndI
</FONT><FONT COLOR="#000000">Rewrite H5
</FONT><FONT COLOR="#000000">Apply equiv_predQ
</FONT><FONT COLOR="#000000">Intro x
</FONT><FONT COLOR="#000000">Unfold Image
</FONT><FONT COLOR="#000000">Unfold Dom
</FONT><FONT COLOR="#000000">Apply equiv_prop Then Intros
</FONT><FONT COLOR="#000000">ExistsE H12
</FONT><FONT COLOR="#000000">ExistsI surj a
</FONT><FONT COLOR="#000000">ExistsI a
</FONT><FONT COLOR="#000000">AndI
</FONT><FONT COLOR="#000000">Apply is_sym
</FONT><FONT COLOR="#000000">Assumption
</FONT><FONT COLOR="#000000">Refl
</FONT><FONT COLOR="#000000">ExistsE H12
</FONT><FONT COLOR="#000000">ExistsE H13
</FONT><FONT COLOR="#000000">AndE H14
</FONT><FONT COLOR="#000000">ExistsI s
</FONT><FONT COLOR="#000000">Apply is_sym
</FONT><FONT COLOR="#000000">Assumption
</FONT><FONT COLOR="#000000">Intro
</FONT><FONT COLOR="#000000">ExistsE H11 On q
</FONT><FONT COLOR="#000000">ExistsI inj a
</FONT><FONT COLOR="#000000">ExistsI a
</FONT><FONT COLOR="#000000">AndI
</FONT><FONT COLOR="#000000">Refl
</FONT><FONT COLOR="#000000">Apply is_sym
</FONT><FONT COLOR="#000000">Assumption
</FONT><FONT COLOR="#000000">Intros
</FONT><FONT COLOR="#000000">ExistsE H12
</FONT><FONT COLOR="#000000">ExistsE H13
</FONT><FONT COLOR="#000000">AndE H14
</FONT><FONT COLOR="#000000">AndE H15
</FONT><FONT COLOR="#000000">Rewrite H16 Then Rewrite H17 Then Rewrite H18 Then Rewrite H19
</FONT><FONT COLOR="#000000">Apply H10
</FONT><FONT COLOR="#000000">Exit
</FONT><FONT COLOR="#000000">
</FONT><FONT COLOR="#000000">
</FONT><FONT COLOR="#000000">----------------------------------------------------
</FONT><FONT COLOR="#000000">----------------------------------------------------
</FONT><FONT COLOR="#000000">--                                                --
</FONT><FONT COLOR="#000000">--  2. H I G H E R - O R D E R   A L G E B R A S  --
</FONT><FONT COLOR="#000000">--                                                --
</FONT><FONT COLOR="#000000">----------------------------------------------------
</FONT><FONT COLOR="#000000">----------------------------------------------------
</FONT><FONT COLOR="#000000">
</FONT><FONT COLOR="#000000">-- auxialary result
</FONT><FONT COLOR="#0000FF">Prove has_elem : @I:*s-&gt;*s. SimplyT I -&gt;
</FONT><FONT COLOR="#0000FF">                 @R : *s. @S : *s.
</FONT><FONT COLOR="#0000FF">                 (Ex r:R. True) -&gt;
</FONT><FONT COLOR="#0000FF">                 (Ex s:S. True) -&gt;
</FONT><FONT COLOR="#0000FF">                 (Ex r:I R. True) -&gt;
</FONT><FONT COLOR="#0000FF">                 (Ex s:I S. True)
</FONT><FONT COLOR="#000000">Intros 2
</FONT><FONT COLOR="#000000">Pattern I
</FONT><FONT COLOR="#000000">Apply H
</FONT><FONT COLOR="#000000">Intros
</FONT><FONT COLOR="#000000">Assumption
</FONT><FONT COLOR="#000000">Intros
</FONT><FONT COLOR="#000000">Assumption
</FONT><FONT COLOR="#000000">Intros
</FONT><FONT COLOR="#000000">Cut Ex s:I1 S -&gt; I2 S. @t:I1 S. (\a:I1 S.\b:I2 S. True) t (s t)
</FONT><FONT COLOR="#000000">Intro
</FONT><FONT COLOR="#000000">ExistsE H6
</FONT><FONT COLOR="#000000">ExistsI s
</FONT><FONT COLOR="#000000">Exact true_True
</FONT><FONT COLOR="#000000">Apply axiom_choice
</FONT><FONT COLOR="#000000">Intro
</FONT><FONT COLOR="#000000">ExistsE H1 On H4, H3
</FONT><FONT COLOR="#000000">ExistsI x
</FONT><FONT COLOR="#000000">Exact true_True
</FONT><FONT COLOR="#000000">ExistsE H5
</FONT><FONT COLOR="#000000">ExistsE H2 On H3, H4
</FONT><FONT COLOR="#000000">ExistsI r s
</FONT><FONT COLOR="#000000">Assumption
</FONT><FONT COLOR="#000000">Assumption
</FONT><FONT COLOR="#000000">Intros
</FONT><FONT COLOR="#000000">ExistsE H5
</FONT><FONT COLOR="#000000">ExistsE H1 On H3, H4
</FONT><FONT COLOR="#000000">ExistsI r`l
</FONT><FONT COLOR="#000000">Assumption
</FONT><FONT COLOR="#000000">ExistsE H2 On H3, H4
</FONT><FONT COLOR="#000000">ExistsI r`r Then Assumption
</FONT><FONT COLOR="#000000">ExistsI {l=s,r=s1}
</FONT><FONT COLOR="#000000">Assumption
</FONT><FONT COLOR="#000000">Exit
</FONT><FONT COLOR="#000000">
</FONT><FONT COLOR="#000000">-- induction-step for Sim_LeftC for the case I = I1 -&gt; I2
</FONT><FONT COLOR="#0000FF">prove Sim_lemma : 
</FONT><FONT COLOR="#0000FF">      @I1,I2 : *s-&gt;*s. SimplyT I1 -&gt; SimplyT I2 -&gt;
</FONT><FONT COLOR="#0000FF">      @Y,Z : *s. (Ex r:Y. True) -&gt; (Ex s:Z. True) -&gt;
</FONT><FONT COLOR="#0000FF">      @(~) : Y-&gt;Z-&gt;*p.
</FONT><FONT COLOR="#0000FF">      IsZclosed (Sim I2 Y Z (~)) -&gt;
</FONT><FONT COLOR="#0000FF">      LeftC (Sim I1 Y Z (~)) &lt;===&gt; Sim I1 Y Y (LeftC (~)) -&gt;
</FONT><FONT COLOR="#0000FF">      LeftC (Sim I2 Y Z (~)) &lt;===&gt; Sim I2 Y Y (LeftC (~)) -&gt;
</FONT><FONT COLOR="#0000FF">      LeftC (Sim (\X:*s. I1 X -&gt; I2 X) Y Z (~)) &lt;===&gt;
</FONT><FONT COLOR="#0000FF">      Sim (\X:*s. I1 X -&gt; I2 X) Y Y (LeftC (~))
</FONT><FONT COLOR="#000000">Intros
</FONT><FONT COLOR="#000000">Repeat Rewrite Sim_arrow
</FONT><FONT COLOR="#000000">Unfold 1 LeftC
</FONT><FONT COLOR="#000000">Apply equiv_predR
</FONT><FONT COLOR="#000000">Intro x,y
</FONT><FONT COLOR="#000000">Apply equiv_prop
</FONT><FONT COLOR="#000000">Intros 3
</FONT><FONT COLOR="#000000">Lewrite H5
</FONT><FONT COLOR="#000000">Intro
</FONT><FONT COLOR="#000000">ExistsE H7
</FONT><FONT COLOR="#000000">AndE H9
</FONT><FONT COLOR="#000000">Unfold LeftC In H8
</FONT><FONT COLOR="#000000">ExistsE H8
</FONT><FONT COLOR="#000000">AndE H12
</FONT><FONT COLOR="#000000">Lewrite H6
</FONT><FONT COLOR="#000000">Unfold LeftC
</FONT><FONT COLOR="#000000">Forward H10 On H13
</FONT><FONT COLOR="#000000">Forward H11 On H14
</FONT><FONT COLOR="#000000">ExistsI z1 z2
</FONT><FONT COLOR="#000000">AndI Then Assumption
</FONT><FONT COLOR="#000000">Intros
</FONT><FONT COLOR="#000000">Cut Ex z:I1 Z -&gt; I2 Z. @z1:I1 Z. (\a:I1 Z.\fa:I2 Z. 
</FONT><FONT COLOR="#000000">         (@y1:I1 Y. Sim I1 Y Z (~) y1 a -&gt; Sim I2 Y Z (~) (x y1) fa) /\
</FONT><FONT COLOR="#000000">         (@y1:I1 Y. Sim I1 Y Z (~) y1 a -&gt; Sim I2 Y Z (~) (y y1) fa)) z1 (z z1)
</FONT><FONT COLOR="#000000">Intro
</FONT><FONT COLOR="#000000">ExistsE H8
</FONT><FONT COLOR="#000000">ExistsI z
</FONT><FONT COLOR="#000000">AndI
</FONT><FONT COLOR="#000000">Intros 2
</FONT><FONT COLOR="#000000">AndEL H9 On z2
</FONT><FONT COLOR="#000000">Apply H11
</FONT><FONT COLOR="#000000">Intros 2
</FONT><FONT COLOR="#000000">AndER H9 On z2
</FONT><FONT COLOR="#000000">Apply H11
</FONT><FONT COLOR="#000000">Apply axiom_choice
</FONT><FONT COLOR="#000000">Intro
</FONT><FONT COLOR="#000000">Apply exm On Ex y1:I1 Y. Sim I1 Y Z (~) y1 x1
</FONT><FONT COLOR="#000000">Intro
</FONT><FONT COLOR="#000000">ExistsE H8
</FONT><FONT COLOR="#000000">Forward H9
</FONT><FONT COLOR="#000000">Let H11 := *p -- dummy
</FONT><FONT COLOR="#000000">Forward rel_LeftC On H10, H10
</FONT><FONT COLOR="#000000">Rewrite H5 In H12
</FONT><FONT COLOR="#000000">Forward H7 On H13
</FONT><FONT COLOR="#000000">Lewrite H6 In H14
</FONT><FONT COLOR="#000000">Unfold LeftC In H15
</FONT><FONT COLOR="#000000">ExistsE H15
</FONT><FONT COLOR="#000000">AndE H16
</FONT><FONT COLOR="#000000">ExistsI z
</FONT><FONT COLOR="#000000">AndI
</FONT><FONT COLOR="#000000">Intros
</FONT><FONT COLOR="#000000">Forward rel_LeftC On H19, H10
</FONT><FONT COLOR="#000000">Rewrite H5 In H20
</FONT><FONT COLOR="#000000">Forward H7 On H21
</FONT><FONT COLOR="#000000">Lewrite H6 In H22
</FONT><FONT COLOR="#000000">Unfold LeftC In H23
</FONT><FONT COLOR="#000000">ExistsE H23
</FONT><FONT COLOR="#000000">AndE H24
</FONT><FONT COLOR="#000000">Apply H4 On H26 Then Assumption
</FONT><FONT COLOR="#000000">Intros
</FONT><FONT COLOR="#000000">Forward rel_LeftC On H10, H19
</FONT><FONT COLOR="#000000">Rewrite H5 In H20
</FONT><FONT COLOR="#000000">Forward H7 On H21
</FONT><FONT COLOR="#000000">Lewrite H6 In H22
</FONT><FONT COLOR="#000000">Unfold LeftC In H23
</FONT><FONT COLOR="#000000">ExistsE H23
</FONT><FONT COLOR="#000000">AndE H24
</FONT><FONT COLOR="#000000">Apply H4 On H25 Then Assumption
</FONT><FONT COLOR="#000000">Intro
</FONT><FONT COLOR="#000000">First Ex s:I1 Z. True
</FONT><FONT COLOR="#000000">ExistsI x1 Then Exact true_True
</FONT><FONT COLOR="#000000">Intro
</FONT><FONT COLOR="#000000">ExistsE has_elem On H2, H9
</FONT><FONT COLOR="#000000">Assumption
</FONT><FONT COLOR="#000000">Assumption
</FONT><FONT COLOR="#000000">First Ex z:I2 Z. True
</FONT><FONT COLOR="#000000">Apply has_elem On H2
</FONT><FONT COLOR="#000000">Assumption
</FONT><FONT COLOR="#000000">Assumption
</FONT><FONT COLOR="#000000">ExistsI x s
</FONT><FONT COLOR="#000000">Assumption
</FONT><FONT COLOR="#000000">Intro
</FONT><FONT COLOR="#000000">ExistsE H12
</FONT><FONT COLOR="#000000">ExistsI z
</FONT><FONT COLOR="#000000">AndI
</FONT><FONT COLOR="#000000">Intros
</FONT><FONT COLOR="#000000">FalseE
</FONT><FONT COLOR="#000000">NotE H8
</FONT><FONT COLOR="#000000">ExistsI y1
</FONT><FONT COLOR="#000000">Assumption
</FONT><FONT COLOR="#000000">Intros
</FONT><FONT COLOR="#000000">FalseE
</FONT><FONT COLOR="#000000">NotE H8
</FONT><FONT COLOR="#000000">ExistsI y2
</FONT><FONT COLOR="#000000">Assumption
</FONT><FONT COLOR="#000000">Exit
</FONT><FONT COLOR="#000000">
</FONT><FONT COLOR="#0000FF">Prove Sim_LeftC :
</FONT><FONT COLOR="#0000FF">            @I:*s-&gt;*s. SimplyT I -&gt;
</FONT><FONT COLOR="#0000FF">            @Y : *s.
</FONT><FONT COLOR="#0000FF">            @Z : *s.
</FONT><FONT COLOR="#0000FF">            (Ex r:Y.True) -&gt;
</FONT><FONT COLOR="#0000FF">            (Ex s:Z.True) -&gt;
</FONT><FONT COLOR="#0000FF">            @(~) : Y-&gt;Z-&gt;*p.
</FONT><FONT COLOR="#0000FF">            IsZclosed (~) -&gt;
</FONT><FONT COLOR="#0000FF">            (Sim I Y Y (LeftC (~)) &lt;===&gt; LeftC (Sim I Y Z (~)))
</FONT><FONT COLOR="#000000">Intros 4 Then Intro Y_not_empty,Z_not_empty Then Intros 2
</FONT><FONT COLOR="#000000">Pattern I
</FONT><FONT COLOR="#000000">Apply SimplyT_elim On H
</FONT><FONT COLOR="#000000">Repeat Rewrite Sim_id
</FONT><FONT COLOR="#000000">Refl
</FONT><FONT COLOR="#000000">Intro
</FONT><FONT COLOR="#000000">Repeat Rewrite Sim_const
</FONT><FONT COLOR="#000000">Unfold LeftC
</FONT><FONT COLOR="#000000">Apply equiv_predR
</FONT><FONT COLOR="#000000">Intros
</FONT><FONT COLOR="#000000">Apply equiv_prop Then Intros
</FONT><FONT COLOR="#000000">ExistsI b
</FONT><FONT COLOR="#000000">AndI
</FONT><FONT COLOR="#000000">Assumption
</FONT><FONT COLOR="#000000">Refl
</FONT><FONT COLOR="#000000">ExistsE H2
</FONT><FONT COLOR="#000000">AndE H3
</FONT><FONT COLOR="#000000">Rewrite H5
</FONT><FONT COLOR="#000000">Assumption
</FONT><FONT COLOR="#000000">Intro I1,I2
</FONT><FONT COLOR="#000000">Intros
</FONT><FONT COLOR="#000000">Apply BimplR_sym
</FONT><FONT COLOR="#000000">Apply Sim_lemma Then Try Assumption
</FONT><FONT COLOR="#000000">Apply IsZclosed_Sim
</FONT><FONT COLOR="#000000">Assumption
</FONT><FONT COLOR="#000000">Assumption
</FONT><FONT COLOR="#000000">Apply BimplR_sym
</FONT><FONT COLOR="#000000">Assumption
</FONT><FONT COLOR="#000000">Apply BimplR_sym
</FONT><FONT COLOR="#000000">Assumption
</FONT><FONT COLOR="#000000">Intro I1,I2
</FONT><FONT COLOR="#000000">Intros
</FONT><FONT COLOR="#000000">Repeat Rewrite Sim_rec
</FONT><FONT COLOR="#000000">Apply equiv_predR
</FONT><FONT COLOR="#000000">Intros
</FONT><FONT COLOR="#000000">Unfold 3 LeftC
</FONT><FONT COLOR="#000000">Apply equiv_prop
</FONT><FONT COLOR="#000000">Intros
</FONT><FONT COLOR="#000000">AndE H6
</FONT><FONT COLOR="#000000">Rewrite H4 In H7
</FONT><FONT COLOR="#000000">Rewrite H5 In H8
</FONT><FONT COLOR="#000000">Unfold LeftC In H9 Then ExistsE H9
</FONT><FONT COLOR="#000000">Unfold LeftC In H10 Then ExistsE H10
</FONT><FONT COLOR="#000000">AndE H11
</FONT><FONT COLOR="#000000">AndE H12
</FONT><FONT COLOR="#000000">ExistsI {l= z,r= z1}
</FONT><FONT COLOR="#000000">Repeat AndI Then Assumption
</FONT><FONT COLOR="#000000">Intros
</FONT><FONT COLOR="#000000">ExistsE H6
</FONT><FONT COLOR="#000000">AndE H7
</FONT><FONT COLOR="#000000">AndE H8
</FONT><FONT COLOR="#000000">AndE H9
</FONT><FONT COLOR="#000000">AndI
</FONT><FONT COLOR="#000000">Rewrite H4
</FONT><FONT COLOR="#000000">Apply rel_LeftC On H10, H12
</FONT><FONT COLOR="#000000">Apply rel_LeftC On H11, H13
</FONT><FONT COLOR="#000000">Intros
</FONT><FONT COLOR="#000000">AndE H14
</FONT><FONT COLOR="#000000">Rewrite H5
</FONT><FONT COLOR="#000000">Apply rel_LeftC On H15, H16
</FONT><FONT COLOR="#000000">Exit
</FONT><FONT COLOR="#000000">
</FONT><FONT COLOR="#000000">-- simple corollary of Sim_LeftC
</FONT><FONT COLOR="#0000FF">prove Sim_LeftC_weak : @I:*s-&gt;*s. SimplyT I -&gt;
</FONT><FONT COLOR="#0000FF">            @Y : *s.
</FONT><FONT COLOR="#0000FF">            @Z : *s.
</FONT><FONT COLOR="#0000FF">            (Ex r:Y.True) -&gt;
</FONT><FONT COLOR="#0000FF">            (Ex s:Z.True) -&gt;
</FONT><FONT COLOR="#0000FF">            @(~) : Y-&gt;Z-&gt;*p.
</FONT><FONT COLOR="#0000FF">            IsZclosed (~) -&gt;
</FONT><FONT COLOR="#0000FF">            @opsY : I Y. Bisim I Y (LeftC (~)) opsY -&gt;
</FONT><FONT COLOR="#0000FF">            Ex opsZ : I Z. Sim I Y Z (~) opsY opsZ
</FONT><FONT COLOR="#000000">Intros
</FONT><FONT COLOR="#000000">Unfold Bisim In H4
</FONT><FONT COLOR="#000000">Rewrite Sim_LeftC In H4 Then Try Assumption
</FONT><FONT COLOR="#000000">Unfold LeftC In H5
</FONT><FONT COLOR="#000000">ExistsE H5
</FONT><FONT COLOR="#000000">AndE H6
</FONT><FONT COLOR="#000000">ExistsI z
</FONT><FONT COLOR="#000000">Assumption
</FONT><FONT COLOR="#000000">Exit
</FONT><FONT COLOR="#000000">
</FONT><FONT COLOR="#000000">
</FONT><FONT COLOR="#000000">-- Now we are ready to consider quotient/subset algebras.
</FONT><FONT COLOR="#000000">
</FONT><FONT COLOR="#0000FF">Def IsQuotAlg := \I:*s-&gt;*s.
</FONT><FONT COLOR="#0000FF">              \R:*s. \opsR : I R. \(~~):R-&gt;R-&gt;*p. \Q:*s. \opsQ : I Q.
</FONT><FONT COLOR="#0000FF">              Ex surj:R-&gt;Q.
</FONT><FONT COLOR="#0000FF">                (@r,r':R. r ~~ r' &lt;=&gt; surj r = surj r') /\
</FONT><FONT COLOR="#0000FF">                IsSurjection surj /\
</FONT><FONT COLOR="#0000FF">                Sim I R Q (\r:R.\q:Q. q = surj r) opsR opsQ  :
</FONT><FONT COLOR="#0000FF">              @I:*s-&gt;*s.@R:*s. I R -&gt; (R-&gt;R-&gt;*p) -&gt; @Q:*s. I Q -&gt; *p
</FONT><FONT COLOR="#000000">
</FONT><FONT COLOR="#0000FF">Def IsSubsetAlg := \I:*s-&gt;*s.\R:*s. \opsR : I R. \Inv:R-&gt;*p. \S:*s.\opsS : I S.
</FONT><FONT COLOR="#0000FF">                Ex inj:S-&gt;R.
</FONT><FONT COLOR="#0000FF">                  IsInjection inj /\
</FONT><FONT COLOR="#0000FF">                  (Inv &lt;==&gt; Image inj) /\
</FONT><FONT COLOR="#0000FF">                  Sim I R S (\r:R.\s:S. r = inj s) opsR opsS  :
</FONT><FONT COLOR="#0000FF">                @I:*s-&gt;*s. @R:*s. I R -&gt; (R-&gt;*p) -&gt; @S:*s. I S -&gt; *p
</FONT><FONT COLOR="#000000">
</FONT><FONT COLOR="#0000FF">Def IsQuotSubsetAlg := \I:*s-&gt;*s.
</FONT><FONT COLOR="#0000FF">               \R:*s. \opsR : I R. \(~~) : R-&gt;R-&gt;*p. \Inv:R-&gt;*p. 
</FONT><FONT COLOR="#0000FF">               \Q:*s. \opsQ : I Q.
</FONT><FONT COLOR="#0000FF">                     ExR rel:R-&gt;Q-&gt;*p.
</FONT><FONT COLOR="#0000FF">                     (Inv &lt;==&gt; Dom rel) /\
</FONT><FONT COLOR="#0000FF">                     (@q:Q. Ex r:R. rel r q) /\
</FONT><FONT COLOR="#0000FF">                     (@r,r':R. @q,q':Q. rel r q -&gt; rel r' q' -&gt; 
</FONT><FONT COLOR="#0000FF">                                        r~~r' &lt;=&gt; q=q') /\
</FONT><FONT COLOR="#0000FF">                     Sim I R Q rel opsR opsQ : 
</FONT><FONT COLOR="#0000FF">              @I:*s-&gt;*s.@R:*s. I R -&gt; (R-&gt;R-&gt;*p) -&gt; (R-&gt;*p) -&gt; @Q:*s. I Q -&gt; *p
</FONT><FONT COLOR="#000000">
</FONT><FONT COLOR="#0000FF">Prove exis_QuotSubsetAlgHO : @I:*s-&gt;*s. SimplyT I -&gt;
</FONT><FONT COLOR="#0000FF">                @R:*s. @opsR:I R. @(~~):R-&gt;R-&gt;*p. @Inv:R-&gt;*p.
</FONT><FONT COLOR="#0000FF">                IsERon (~~) Inv -&gt; 
</FONT><FONT COLOR="#0000FF">                (Ex r:R. Inv r) -&gt;
</FONT><FONT COLOR="#0000FF">                Bisim I R (Restr (~~) Inv) opsR -&gt; 
</FONT><FONT COLOR="#0000FF">                ExK Q:*s. Ex opsQ: I Q. 
</FONT><FONT COLOR="#0000FF">                IsQuotSubsetAlg I R opsR (~~) Inv Q opsQ
</FONT><FONT COLOR="#000000">Intros
</FONT><FONT COLOR="#000000">ExistsE exis_QuotSubsetType On Inv, H1
</FONT><FONT COLOR="#000000">ExistsI Q
</FONT><FONT COLOR="#000000">Unfold IsQuotSubsetType In H5
</FONT><FONT COLOR="#000000">ExistsE H5
</FONT><FONT COLOR="#000000">AndE H6
</FONT><FONT COLOR="#000000">AndE H8
</FONT><FONT COLOR="#000000">First Restr (~~) Inv &lt;===&gt; LeftC rel
</FONT><FONT COLOR="#000000">Apply equiv_predR
</FONT><FONT COLOR="#000000">Intro x,y
</FONT><FONT COLOR="#000000">Apply equiv_prop Then Intro
</FONT><FONT COLOR="#000000">Unfold Restr In H11
</FONT><FONT COLOR="#000000">AndE H11
</FONT><FONT COLOR="#000000">AndE H13
</FONT><FONT COLOR="#000000">Unfold LeftC
</FONT><FONT COLOR="#000000">Rewrite H7 In H12
</FONT><FONT COLOR="#000000">Rewrite H7 In H15
</FONT><FONT COLOR="#000000">Unfold Dom In H16 Then ExistsE H16
</FONT><FONT COLOR="#000000">Unfold Dom In H17 Then ExistsE H17
</FONT><FONT COLOR="#000000">ExistsI b
</FONT><FONT COLOR="#000000">AndI
</FONT><FONT COLOR="#000000">Assumption
</FONT><FONT COLOR="#000000">First b=b1
</FONT><FONT COLOR="#000000">Lewrite H10 On H18, H19 Then Assumption
</FONT><FONT COLOR="#000000">Intro
</FONT><FONT COLOR="#000000">Rewrite H20
</FONT><FONT COLOR="#000000">Assumption
</FONT><FONT COLOR="#000000">Unfold LeftC In H11
</FONT><FONT COLOR="#000000">ExistsE H11
</FONT><FONT COLOR="#000000">AndE H12
</FONT><FONT COLOR="#000000">Unfold Restr
</FONT><FONT COLOR="#000000">Repeat AndI
</FONT><FONT COLOR="#000000">Rewrite H7
</FONT><FONT COLOR="#000000">Unfold Dom Then ExistsI z
</FONT><FONT COLOR="#000000">Assumption
</FONT><FONT COLOR="#000000">Rewrite H10 On H13, H14
</FONT><FONT COLOR="#000000">Refl
</FONT><FONT COLOR="#000000">Rewrite H7
</FONT><FONT COLOR="#000000">Unfold Dom Then ExistsI z
</FONT><FONT COLOR="#000000">Assumption
</FONT><FONT COLOR="#000000">Intro
</FONT><FONT COLOR="#000000">Rewrite H11 In H3
</FONT><FONT COLOR="#000000">First Ex r:R. True
</FONT><FONT COLOR="#000000">ExistsE H2
</FONT><FONT COLOR="#000000">ExistsI r
</FONT><FONT COLOR="#000000">Exact true_True
</FONT><FONT COLOR="#000000">Intro R_not_empty
</FONT><FONT COLOR="#000000">First Ex q:Q. True
</FONT><FONT COLOR="#000000">ExistsE H2
</FONT><FONT COLOR="#000000">Rewrite H7 In H13
</FONT><FONT COLOR="#000000">Unfold Dom In H14
</FONT><FONT COLOR="#000000">ExistsE H14
</FONT><FONT COLOR="#000000">ExistsI b
</FONT><FONT COLOR="#000000">Exact true_True
</FONT><FONT COLOR="#000000">Intro Q_not_empty
</FONT><FONT COLOR="#000000">Forward Sim_LeftC_weak On H12 Then Try Assumption
</FONT><FONT COLOR="#000000">Unfold IsZclosed
</FONT><FONT COLOR="#000000">Intros
</FONT><FONT COLOR="#000000">First z1=z2
</FONT><FONT COLOR="#000000">Lewrite H10 On H13, H14
</FONT><FONT COLOR="#000000">Rewrite H10 On H13, H13
</FONT><FONT COLOR="#000000">Refl
</FONT><FONT COLOR="#000000">Intro
</FONT><FONT COLOR="#000000">Rewrite H16
</FONT><FONT COLOR="#000000">Assumption
</FONT><FONT COLOR="#000000">ExistsE H13
</FONT><FONT COLOR="#000000">Unfold IsQuotSubsetAlg
</FONT><FONT COLOR="#000000">ExistsI opsZ
</FONT><FONT COLOR="#000000">ExistsI rel
</FONT><FONT COLOR="#000000">Repeat AndI Then Try Assumption
</FONT><FONT COLOR="#000000">Exit
</FONT><FONT COLOR="#000000">
</FONT><FONT COLOR="#0000FF">Prove exis_QuotAlgHO : @I:*s-&gt;*s. SimplyT I -&gt;
</FONT><FONT COLOR="#0000FF">                  @R:*s. @opsR:I R. @(~~):R-&gt;R-&gt;*p. 
</FONT><FONT COLOR="#0000FF">                  Bisim I R (~~) opsR -&gt; IsER (~~) -&gt;
</FONT><FONT COLOR="#0000FF">                  ExK Q:*s. Ex opsQ: I Q. 
</FONT><FONT COLOR="#0000FF">                  IsQuotAlg I R opsR (~~) Q opsQ
</FONT><FONT COLOR="#000000">Intros 5
</FONT><FONT COLOR="#000000">OrE exm (Ex r:R. True)
</FONT><FONT COLOR="#000000">Intros
</FONT><FONT COLOR="#000000">ExistsE exis_QuotType On H3
</FONT><FONT COLOR="#000000">ExistsI Q
</FONT><FONT COLOR="#000000">Unfold IsQuotType In H5
</FONT><FONT COLOR="#000000">ExistsE H5
</FONT><FONT COLOR="#000000">AndE H6
</FONT><FONT COLOR="#000000">Let (~) := \r:R.\q:Q. q = surj r
</FONT><FONT COLOR="#000000">First LeftC (~) &lt;===&gt; (~~)
</FONT><FONT COLOR="#000000">Unfold LeftC
</FONT><FONT COLOR="#000000">Unfold (~)
</FONT><FONT COLOR="#000000">Apply equiv_predR
</FONT><FONT COLOR="#000000">Intros
</FONT><FONT COLOR="#000000">Rewrite H7
</FONT><FONT COLOR="#000000">Apply equiv_prop Then Intro
</FONT><FONT COLOR="#000000">ExistsE H9
</FONT><FONT COLOR="#000000">AndE H10
</FONT><FONT COLOR="#000000">Lewrite H11
</FONT><FONT COLOR="#000000">Assumption
</FONT><FONT COLOR="#000000">ExistsI surj b
</FONT><FONT COLOR="#000000">AndI
</FONT><FONT COLOR="#000000">Apply is_sym
</FONT><FONT COLOR="#000000">Assumption
</FONT><FONT COLOR="#000000">Refl
</FONT><FONT COLOR="#000000">Intro
</FONT><FONT COLOR="#000000">Lewrite H9 In H2
</FONT><FONT COLOR="#000000">Forward Sim_LeftC_weak On H10 Then Try Assumption
</FONT><FONT COLOR="#000000">ExistsE H1
</FONT><FONT COLOR="#000000">ExistsI surj r
</FONT><FONT COLOR="#000000">Assumption
</FONT><FONT COLOR="#000000">Unfold IsZclosed
</FONT><FONT COLOR="#000000">Unfold (~)
</FONT><FONT COLOR="#000000">Intros
</FONT><FONT COLOR="#000000">Rewrite H11
</FONT><FONT COLOR="#000000">Lewrite H12
</FONT><FONT COLOR="#000000">Assumption
</FONT><FONT COLOR="#000000">Unfold LeftC In H11
</FONT><FONT COLOR="#000000">ExistsE H11
</FONT><FONT COLOR="#000000">Unfold IsQuotAlg
</FONT><FONT COLOR="#000000">ExistsI opsZ
</FONT><FONT COLOR="#000000">ExistsI surj
</FONT><FONT COLOR="#000000">Repeat AndI Then Assumption
</FONT><FONT COLOR="#000000">Intros
</FONT><FONT COLOR="#000000">ExistsI R
</FONT><FONT COLOR="#000000">ExistsI opsR
</FONT><FONT COLOR="#000000">Unfold IsQuotAlg
</FONT><FONT COLOR="#000000">ExistsI \r:R. r
</FONT><FONT COLOR="#000000">First @r:R. False
</FONT><FONT COLOR="#000000">Intro
</FONT><FONT COLOR="#000000">NotE H1
</FONT><FONT COLOR="#000000">ExistsI r
</FONT><FONT COLOR="#000000">Exact true_True
</FONT><FONT COLOR="#000000">Intros
</FONT><FONT COLOR="#000000">Repeat AndI
</FONT><FONT COLOR="#000000">Intros
</FONT><FONT COLOR="#000000">FalseE
</FONT><FONT COLOR="#000000">Apply H4
</FONT><FONT COLOR="#000000">Assumption
</FONT><FONT COLOR="#000000">Unfold IsSurjection
</FONT><FONT COLOR="#000000">Intro
</FONT><FONT COLOR="#000000">FalseE
</FONT><FONT COLOR="#000000">Apply H4
</FONT><FONT COLOR="#000000">Assumption
</FONT><FONT COLOR="#000000">First (=) R &lt;===&gt; (\r,q:R. q=r)
</FONT><FONT COLOR="#000000">Apply equiv_predR
</FONT><FONT COLOR="#000000">Intro x,y
</FONT><FONT COLOR="#000000">Apply equiv_prop Then Intro Then Rewrite H5 Then Refl
</FONT><FONT COLOR="#000000">Intro
</FONT><FONT COLOR="#000000">Lewrite H5
</FONT><FONT COLOR="#000000">Rewrite Sim_is
</FONT><FONT COLOR="#000000">Assumption
</FONT><FONT COLOR="#000000">Refl
</FONT><FONT COLOR="#000000">Exit
</FONT><FONT COLOR="#000000">
</FONT><FONT COLOR="#0000FF">Prove exis_SubsetAlgHO : @I:*s-&gt;*s. SimplyT I -&gt;
</FONT><FONT COLOR="#0000FF">                    @R:*s. @opsR:I R. @Inv:R-&gt;*p. (Ex r:R. Inv r) -&gt;
</FONT><FONT COLOR="#0000FF">                    Bisim I R (\r1,r2:R. Inv r1 /\ r1=r2) opsR -&gt;
</FONT><FONT COLOR="#0000FF">                    ExK S:*s. Ex opsS: I S. 
</FONT><FONT COLOR="#0000FF">                    IsSubsetAlg I R opsR Inv S opsS
</FONT><FONT COLOR="#000000">Intros
</FONT><FONT COLOR="#000000">ExistsE exis_SubsetType On Inv
</FONT><FONT COLOR="#000000">ExistsI S
</FONT><FONT COLOR="#000000">Unfold IsSubsetType In H4
</FONT><FONT COLOR="#000000">ExistsE H4
</FONT><FONT COLOR="#000000">AndE H5
</FONT><FONT COLOR="#000000">Let (~) := \r:R.\s:S. r = inj s
</FONT><FONT COLOR="#000000">First (\r1,r2:R. Inv r1 /\ r1=r2) &lt;===&gt; LeftC (~)
</FONT><FONT COLOR="#000000">Unfold (~)
</FONT><FONT COLOR="#000000">Unfold LeftC
</FONT><FONT COLOR="#000000">Apply equiv_predR
</FONT><FONT COLOR="#000000">Intros
</FONT><FONT COLOR="#000000">Apply equiv_prop Then Intro
</FONT><FONT COLOR="#000000">AndE H8
</FONT><FONT COLOR="#000000">Rewrite H7 In H9
</FONT><FONT COLOR="#000000">Unfold Image In H11
</FONT><FONT COLOR="#000000">ExistsE H11
</FONT><FONT COLOR="#000000">ExistsI a1
</FONT><FONT COLOR="#000000">AndI
</FONT><FONT COLOR="#000000">Apply is_sym
</FONT><FONT COLOR="#000000">Assumption
</FONT><FONT COLOR="#000000">Lewrite H10
</FONT><FONT COLOR="#000000">Apply is_sym
</FONT><FONT COLOR="#000000">Assumption
</FONT><FONT COLOR="#000000">ExistsE H8
</FONT><FONT COLOR="#000000">AndE H9
</FONT><FONT COLOR="#000000">AndI
</FONT><FONT COLOR="#000000">Rewrite H7
</FONT><FONT COLOR="#000000">Rewrite H10
</FONT><FONT COLOR="#000000">Apply Image_f_f_x
</FONT><FONT COLOR="#000000">Rewrite H11
</FONT><FONT COLOR="#000000">Assumption
</FONT><FONT COLOR="#000000">Intro
</FONT><FONT COLOR="#000000">Rewrite H8 In H2
</FONT><FONT COLOR="#000000">Forward Sim_LeftC_weak On H9 Then Try Assumption
</FONT><FONT COLOR="#000000">ExistsE H1
</FONT><FONT COLOR="#000000">ExistsI r
</FONT><FONT COLOR="#000000">Exact true_True
</FONT><FONT COLOR="#000000">ExistsE H1
</FONT><FONT COLOR="#000000">Rewrite H7 In H10
</FONT><FONT COLOR="#000000">Unfold Image In H11
</FONT><FONT COLOR="#000000">ExistsE H11
</FONT><FONT COLOR="#000000">ExistsI a
</FONT><FONT COLOR="#000000">Exact true_True
</FONT><FONT COLOR="#000000">Unfold IsZclosed
</FONT><FONT COLOR="#000000">Unfold (~)
</FONT><FONT COLOR="#000000">Intros
</FONT><FONT COLOR="#000000">Lewrite H10
</FONT><FONT COLOR="#000000">Rewrite H11
</FONT><FONT COLOR="#000000">Assumption
</FONT><FONT COLOR="#000000">ExistsE H10
</FONT><FONT COLOR="#000000">ExistsI opsZ
</FONT><FONT COLOR="#000000">Unfold IsSubsetAlg
</FONT><FONT COLOR="#000000">ExistsI inj
</FONT><FONT COLOR="#000000">Repeat AndI Then Try Assumption
</FONT><FONT COLOR="#000000">Exit
</FONT><FONT COLOR="#000000">
</FONT><FONT COLOR="#000000">
</FONT><FONT COLOR="#000000">--------------------------------------------------
</FONT><FONT COLOR="#000000">--------------------------------------------------
</FONT><FONT COLOR="#000000">--                                              --
</FONT><FONT COLOR="#000000">--  3. F I R S T - O R D E R   A L G E B R A S  --
</FONT><FONT COLOR="#000000">--                                              --
</FONT><FONT COLOR="#000000">--------------------------------------------------
</FONT><FONT COLOR="#000000">--------------------------------------------------
</FONT><FONT COLOR="#000000">
</FONT><FONT COLOR="#000000">-- We first consider quotients, then subsets, and then quotients of subsets.
</FONT><FONT COLOR="#000000">
</FONT><FONT COLOR="#000000">---------------
</FONT><FONT COLOR="#000000">-- QUOTIENTS --
</FONT><FONT COLOR="#000000">---------------
</FONT><FONT COLOR="#000000">
</FONT><FONT COLOR="#0000FF">Prove exis_QuotAlg :@I:*s-&gt;*s. FirstO I -&gt;
</FONT><FONT COLOR="#0000FF">                  @R:*s. @opsR:I R. @(~~):R-&gt;R-&gt;*p. 
</FONT><FONT COLOR="#0000FF">                  Bisim I R (~~) opsR -&gt; IsER (~~) -&gt;
</FONT><FONT COLOR="#0000FF">                  ExK Q:*s. Ex opsQ: I Q. 
</FONT><FONT COLOR="#0000FF">                  IsQuotAlg I R opsR (~~) Q opsQ
</FONT><FONT COLOR="#000000">Intros 2
</FONT><FONT COLOR="#000000">Apply exis_QuotAlgHO
</FONT><FONT COLOR="#000000">Apply FirstO__SimplyT
</FONT><FONT COLOR="#000000">Assumption
</FONT><FONT COLOR="#000000">Exit
</FONT><FONT COLOR="#000000">
</FONT><FONT COLOR="#000000">-------------
</FONT><FONT COLOR="#000000">-- SUBSETS --
</FONT><FONT COLOR="#000000">-------------
</FONT><FONT COLOR="#000000">
</FONT><FONT COLOR="#000000">-- Now first-order subset algebras. We do this in two steps.
</FONT><FONT COLOR="#000000">-- First we prove exis_SubsetAlg_Bisim, i.e.
</FONT><FONT COLOR="#000000">--                  @I:*s-&gt;*s. FirstO I -&gt;
</FONT><FONT COLOR="#000000">--                  @R:*s. @Inv:R-&gt;*p.  @opsR:I R.
</FONT><FONT COLOR="#000000">--                  Bisim I R (\r1,r2:R. Inv r1 /\ r1=r2) opsR -&gt;
</FONT><FONT COLOR="#000000">--                  ExK S:*s. Ex opsS: I S. 
</FONT><FONT COLOR="#000000">--                  IsSubsetAlg I R opsR Inv S opsS
</FONT><FONT COLOR="#000000">-- This requires three auxiliary results.
</FONT><FONT COLOR="#000000">-- Then it is easy to prove exis_SubsetAlg.
</FONT><FONT COLOR="#000000">
</FONT><FONT COLOR="#000000">
</FONT><FONT COLOR="#000000">-- Auxiliary result 1: Sim_LeftC for Basic interfaces, but with possibly
</FONT><FONT COLOR="#000000">-- empty types.
</FONT><FONT COLOR="#0000FF">prove Sim_Basic_LeftC_strong : @I:*s-&gt;*s. Basic I -&gt;
</FONT><FONT COLOR="#0000FF">            @Y : *s.
</FONT><FONT COLOR="#0000FF">            @Z : *s.
</FONT><FONT COLOR="#0000FF">            @(~) : Y-&gt;Z-&gt;*p.
</FONT><FONT COLOR="#0000FF">            IsZclosed (~) -&gt;
</FONT><FONT COLOR="#0000FF">            Sim I Y Y (LeftC (~)) &lt;===&gt; LeftC (Sim I Y Z (~))
</FONT><FONT COLOR="#000000">Intros
</FONT><FONT COLOR="#000000">Apply Basic_elim On H
</FONT><FONT COLOR="#000000">Repeat Rewrite Sim_id
</FONT><FONT COLOR="#000000">Refl
</FONT><FONT COLOR="#000000">Intros
</FONT><FONT COLOR="#000000">Repeat Rewrite Sim_const
</FONT><FONT COLOR="#000000">Apply equiv_predR
</FONT><FONT COLOR="#000000">Unfold LeftC
</FONT><FONT COLOR="#000000">Intros
</FONT><FONT COLOR="#000000">Apply equiv_prop Then Intro
</FONT><FONT COLOR="#000000">ExistsI b
</FONT><FONT COLOR="#000000">AndI
</FONT><FONT COLOR="#000000">Assumption
</FONT><FONT COLOR="#000000">Refl
</FONT><FONT COLOR="#000000">ExistsE H2
</FONT><FONT COLOR="#000000">AndE H3
</FONT><FONT COLOR="#000000">Rewrite H5
</FONT><FONT COLOR="#000000">Assumption
</FONT><FONT COLOR="#000000">Intros
</FONT><FONT COLOR="#000000">Repeat Rewrite Sim_rec
</FONT><FONT COLOR="#000000">Apply equiv_predR
</FONT><FONT COLOR="#000000">Intros
</FONT><FONT COLOR="#000000">Rewrite H4
</FONT><FONT COLOR="#000000">Rewrite H5
</FONT><FONT COLOR="#000000">Apply equiv_prop Then Intro
</FONT><FONT COLOR="#000000">Unfold LeftC In H6
</FONT><FONT COLOR="#000000">AndE H6
</FONT><FONT COLOR="#000000">ExistsE H7
</FONT><FONT COLOR="#000000">AndE H9
</FONT><FONT COLOR="#000000">ExistsE H8
</FONT><FONT COLOR="#000000">AndE H12
</FONT><FONT COLOR="#000000">Unfold LeftC
</FONT><FONT COLOR="#000000">ExistsI {l= z,r= z1}
</FONT><FONT COLOR="#000000">Repeat AndI Then Assumption
</FONT><FONT COLOR="#000000">Unfold LeftC In H6
</FONT><FONT COLOR="#000000">ExistsE H6
</FONT><FONT COLOR="#000000">AndE H7
</FONT><FONT COLOR="#000000">AndE H8
</FONT><FONT COLOR="#000000">AndE H9
</FONT><FONT COLOR="#000000">Unfold LeftC
</FONT><FONT COLOR="#000000">AndI
</FONT><FONT COLOR="#000000">ExistsI z`l
</FONT><FONT COLOR="#000000">AndI Then Assumption
</FONT><FONT COLOR="#000000">ExistsI z`r
</FONT><FONT COLOR="#000000">AndI Then Assumption
</FONT><FONT COLOR="#000000">Exit
</FONT><FONT COLOR="#000000">
</FONT><FONT COLOR="#000000">-- Auxiliary result 2
</FONT><FONT COLOR="#0000FF">prove Sim_FirstO_LeftC_weak_lemma : @I:*s-&gt;*s. Basic I -&gt;
</FONT><FONT COLOR="#0000FF">            @Y : *s.
</FONT><FONT COLOR="#0000FF">            @Z : *s.
</FONT><FONT COLOR="#0000FF">            @(~) : Y-&gt;Z-&gt;*p.
</FONT><FONT COLOR="#0000FF">            (@z:Z. Ex y:Y. y~z) -&gt;
</FONT><FONT COLOR="#0000FF">            (@opsZ:I Z. Ex opsY:I Y. Sim I Y Z (~) opsY opsZ )
</FONT><FONT COLOR="#000000">Intros 6
</FONT><FONT COLOR="#000000">Apply Basic_elim On H
</FONT><FONT COLOR="#000000">Rewrite Sim_id
</FONT><FONT COLOR="#000000">Assumption
</FONT><FONT COLOR="#000000">Intros
</FONT><FONT COLOR="#000000">Rewrite Sim_const
</FONT><FONT COLOR="#000000">ExistsI opsZ
</FONT><FONT COLOR="#000000">Refl
</FONT><FONT COLOR="#000000">Intros
</FONT><FONT COLOR="#000000">ExistsE H4 On opsZ`l
</FONT><FONT COLOR="#000000">ExistsE H5 On opsZ`r
</FONT><FONT COLOR="#000000">ExistsI {l= opsY,r= opsY1}
</FONT><FONT COLOR="#000000">Rewrite Sim_rec
</FONT><FONT COLOR="#000000">AndI Then Assumption
</FONT><FONT COLOR="#000000">Exit
</FONT><FONT COLOR="#000000">
</FONT><FONT COLOR="#000000">-- Auxiliary result 3
</FONT><FONT COLOR="#0000FF">prove Sim_FirstO_LeftC_weak : @I:*s-&gt;*s. FirstO I -&gt;
</FONT><FONT COLOR="#0000FF">            @Y : *s.
</FONT><FONT COLOR="#0000FF">            @Z : *s.
</FONT><FONT COLOR="#0000FF">            @(~) : Y-&gt;Z-&gt;*p. 
</FONT><FONT COLOR="#0000FF">            IsZclosed (~) -&gt; (@z:Z. Ex y:Y. y~z) -&gt;
</FONT><FONT COLOR="#0000FF">            @opsY,opsY':I Y. Sim I Y Y (LeftC (~)) opsY opsY' -&gt; 
</FONT><FONT COLOR="#0000FF">            LeftC (Sim I Y Z (~)) opsY opsY'
</FONT><FONT COLOR="#000000">Intros 6
</FONT><FONT COLOR="#000000">Intro prop_twig
</FONT><FONT COLOR="#000000">Apply FirstO_elim On H
</FONT><FONT COLOR="#000000">Intros
</FONT><FONT COLOR="#000000">Lewrite Sim_Basic_LeftC_strong
</FONT><FONT COLOR="#000000">Assumption
</FONT><FONT COLOR="#000000">Assumption
</FONT><FONT COLOR="#000000">Assumption
</FONT><FONT COLOR="#000000">Intros 4
</FONT><FONT COLOR="#000000">Repeat Rewrite Sim_arrow
</FONT><FONT COLOR="#000000">Intro Then Intro x,y Then Intros
</FONT><FONT COLOR="#000000">Unfold LeftC
</FONT><FONT COLOR="#000000">Cut Ex z:I2 Z -&gt; I3 Z. @z1:I2 Z. (\z1:I2 Z.\zz1:I3 Z. 
</FONT><FONT COLOR="#000000">         @y1:I2 Y. Sim I2 Y Z (~) y1 z1 -&gt; Sim I3 Y Z (~) (x y1) zz1 /\
</FONT><FONT COLOR="#000000">                                           Sim I3 Y Z (~) (y y1) zz1) z1 (z z1)
</FONT><FONT COLOR="#000000">Simplify
</FONT><FONT COLOR="#000000">Intro
</FONT><FONT COLOR="#000000">ExistsE H6
</FONT><FONT COLOR="#000000">ExistsI z
</FONT><FONT COLOR="#000000">AndI
</FONT><FONT COLOR="#000000">Intros
</FONT><FONT COLOR="#000000">AndE H7 On H8
</FONT><FONT COLOR="#000000">Assumption
</FONT><FONT COLOR="#000000">Intros
</FONT><FONT COLOR="#000000">AndE H7 On H8
</FONT><FONT COLOR="#000000">Assumption
</FONT><FONT COLOR="#000000">Apply axiom_choice
</FONT><FONT COLOR="#000000">Intro
</FONT><FONT COLOR="#000000">OrE exm On Ex y1:I2 Y. Sim I2 Y Z (~) y1 x1
</FONT><FONT COLOR="#000000">ExistsE H7
</FONT><FONT COLOR="#000000">Forward H4 On x y1, y y1
</FONT><FONT COLOR="#000000">Unfold 2 LeftC In H9
</FONT><FONT COLOR="#000000">ExistsE H9
</FONT><FONT COLOR="#000000">Apply H5
</FONT><FONT COLOR="#000000">Rewrite Sim_Basic_LeftC_strong
</FONT><FONT COLOR="#000000">Assumption
</FONT><FONT COLOR="#000000">Assumption
</FONT><FONT COLOR="#000000">Apply rel_LeftC On H8, H8
</FONT><FONT COLOR="#000000">AndE H11
</FONT><FONT COLOR="#000000">ExistsI z
</FONT><FONT COLOR="#000000">Intros
</FONT><FONT COLOR="#000000">AndI
</FONT><FONT COLOR="#000000">Forward rel_LeftC On H14, H8
</FONT><FONT COLOR="#000000">Lewrite Sim_Basic_LeftC_strong In H15
</FONT><FONT COLOR="#000000">Assumption
</FONT><FONT COLOR="#000000">Assumption
</FONT><FONT COLOR="#000000">Forward H5 On H16
</FONT><FONT COLOR="#000000">Forward H4 On H17
</FONT><FONT COLOR="#000000">Unfold LeftC In H18
</FONT><FONT COLOR="#000000">ExistsE H18
</FONT><FONT COLOR="#000000">AndE H19
</FONT><FONT COLOR="#000000">Forward IsZclosed_Sim On I3, H1
</FONT><FONT COLOR="#000000">Apply FirstO__SimplyT
</FONT><FONT COLOR="#000000">Assumption
</FONT><FONT COLOR="#000000">Apply H22 On H21 Then Assumption
</FONT><FONT COLOR="#000000">Forward rel_LeftC On H8, H14
</FONT><FONT COLOR="#000000">Lewrite Sim_Basic_LeftC_strong In H15
</FONT><FONT COLOR="#000000">Assumption
</FONT><FONT COLOR="#000000">Assumption
</FONT><FONT COLOR="#000000">Forward H5 On H16
</FONT><FONT COLOR="#000000">Forward H4 On H17
</FONT><FONT COLOR="#000000">Unfold LeftC In H18
</FONT><FONT COLOR="#000000">ExistsE H18
</FONT><FONT COLOR="#000000">AndE H19
</FONT><FONT COLOR="#000000">Forward IsZclosed_Sim On I3, H1
</FONT><FONT COLOR="#000000">Apply FirstO__SimplyT
</FONT><FONT COLOR="#000000">Assumption
</FONT><FONT COLOR="#000000">Apply H22 On H20 Then Assumption
</FONT><FONT COLOR="#000000">Cut Ex z:I3 Z. True
</FONT><FONT COLOR="#000000">Intro
</FONT><FONT COLOR="#000000">ExistsE H8
</FONT><FONT COLOR="#000000">ExistsI z
</FONT><FONT COLOR="#000000">Intros
</FONT><FONT COLOR="#000000">FalseE
</FONT><FONT COLOR="#000000">NotE H7
</FONT><FONT COLOR="#000000">ExistsI y2
</FONT><FONT COLOR="#000000">Assumption
</FONT><FONT COLOR="#000000">Cut @z:Z. Ex y:Y. y~z
</FONT><FONT COLOR="#000000">Intro
</FONT><FONT COLOR="#000000">Cut @z:I2 Z. Ex y:I2 Y. Sim I2 Y Z (~) y z
</FONT><FONT COLOR="#000000">Intro
</FONT><FONT COLOR="#000000">ExistsE H9 On x1
</FONT><FONT COLOR="#000000">Forward rel_LeftC On H11, H11
</FONT><FONT COLOR="#000000">Lewrite Sim_Basic_LeftC_strong In H12
</FONT><FONT COLOR="#000000">Assumption
</FONT><FONT COLOR="#000000">Assumption
</FONT><FONT COLOR="#000000">Forward H5 On H13
</FONT><FONT COLOR="#000000">Forward H4 On H14
</FONT><FONT COLOR="#000000">Unfold LeftC In H15
</FONT><FONT COLOR="#000000">ExistsE H15
</FONT><FONT COLOR="#000000">ExistsI z
</FONT><FONT COLOR="#000000">Exact true_True
</FONT><FONT COLOR="#000000">Apply Sim_FirstO_LeftC_weak_lemma
</FONT><FONT COLOR="#000000">Assumption
</FONT><FONT COLOR="#000000">Assumption
</FONT><FONT COLOR="#000000">Exact prop_twig
</FONT><FONT COLOR="#000000">Intros 6 Then Intro x,y
</FONT><FONT COLOR="#000000">Repeat Rewrite Sim_rec
</FONT><FONT COLOR="#000000">Intros
</FONT><FONT COLOR="#000000">AndE H6
</FONT><FONT COLOR="#000000">Unfold LeftC
</FONT><FONT COLOR="#000000">Forward H4 On H7
</FONT><FONT COLOR="#000000">Forward H5 On H8
</FONT><FONT COLOR="#000000">Unfold LeftC In H9
</FONT><FONT COLOR="#000000">ExistsE H9
</FONT><FONT COLOR="#000000">AndE H11
</FONT><FONT COLOR="#000000">Unfold LeftC In H10
</FONT><FONT COLOR="#000000">ExistsE H10 Then AndE H14
</FONT><FONT COLOR="#000000">ExistsI {l= z,r= z1}
</FONT><FONT COLOR="#000000">Repeat AndI Then Assumption
</FONT><FONT COLOR="#000000">Exit
</FONT><FONT COLOR="#000000">
</FONT><FONT COLOR="#000000">-- The next result is equal to exis_SubsetAlg, except that it has
</FONT><FONT COLOR="#000000">--    Bisim I R (\r1,r2:R. Inv r1 /\ r1=r2) opsR
</FONT><FONT COLOR="#000000">-- instead of
</FONT><FONT COLOR="#000000">--    IsInvar I R Inv opsR
</FONT><FONT COLOR="#0000FF">Prove exis_SubsetAlg_Bisim : @I:*s-&gt;*s. FirstO I -&gt;
</FONT><FONT COLOR="#0000FF">                    @R:*s. @Inv:R-&gt;*p.  @opsR:I R.
</FONT><FONT COLOR="#0000FF">                    Bisim I R (\r1,r2:R. Inv r1 /\ r1=r2) opsR -&gt;
</FONT><FONT COLOR="#0000FF">                    ExK S:*s. Ex opsS: I S. 
</FONT><FONT COLOR="#0000FF">                    IsSubsetAlg I R opsR Inv S opsS
</FONT><FONT COLOR="#000000">Intros
</FONT><FONT COLOR="#000000">ExistsE exis_SubsetType On Inv
</FONT><FONT COLOR="#000000">ExistsI S
</FONT><FONT COLOR="#000000">Unfold IsSubsetType In H3
</FONT><FONT COLOR="#000000">ExistsE H3
</FONT><FONT COLOR="#000000">AndE H4
</FONT><FONT COLOR="#000000">Let (~) := \r:R.\s:S. r = inj s
</FONT><FONT COLOR="#000000">First (\r1,r2:R. Inv r1 /\ r1=r2) &lt;===&gt; LeftC (~)
</FONT><FONT COLOR="#000000">Apply equiv_predR
</FONT><FONT COLOR="#000000">Unfold LeftC
</FONT><FONT COLOR="#000000">Unfold (~)
</FONT><FONT COLOR="#000000">Intros
</FONT><FONT COLOR="#000000">Apply equiv_prop
</FONT><FONT COLOR="#000000">Intros
</FONT><FONT COLOR="#000000">AndE H7
</FONT><FONT COLOR="#000000">Rewrite H6 In H8
</FONT><FONT COLOR="#000000">Unfold Image In H10
</FONT><FONT COLOR="#000000">ExistsE H10
</FONT><FONT COLOR="#000000">ExistsI a1
</FONT><FONT COLOR="#000000">AndI
</FONT><FONT COLOR="#000000">Rewrite H11
</FONT><FONT COLOR="#000000">Refl
</FONT><FONT COLOR="#000000">Rewrite H11
</FONT><FONT COLOR="#000000">Rewrite H9
</FONT><FONT COLOR="#000000">Refl
</FONT><FONT COLOR="#000000">Intros
</FONT><FONT COLOR="#000000">ExistsE H7
</FONT><FONT COLOR="#000000">AndE H8
</FONT><FONT COLOR="#000000">AndI
</FONT><FONT COLOR="#000000">Rewrite H9
</FONT><FONT COLOR="#000000">Rewrite H6
</FONT><FONT COLOR="#000000">Apply Image_f_f_x
</FONT><FONT COLOR="#000000">Rewrite H10
</FONT><FONT COLOR="#000000">Assumption
</FONT><FONT COLOR="#000000">Intro
</FONT><FONT COLOR="#000000">Rewrite H7 In H1
</FONT><FONT COLOR="#000000">Unfold Bisim In H8
</FONT><FONT COLOR="#000000">Forward Sim_FirstO_LeftC_weak On H8
</FONT><FONT COLOR="#000000">Assumption
</FONT><FONT COLOR="#000000">Unfold (~)
</FONT><FONT COLOR="#000000">Unfold IsZclosed
</FONT><FONT COLOR="#000000">Intros
</FONT><FONT COLOR="#000000">Rewrite H11
</FONT><FONT COLOR="#000000">Lewrite H10
</FONT><FONT COLOR="#000000">Assumption
</FONT><FONT COLOR="#000000">Unfold (~)
</FONT><FONT COLOR="#000000">Intros
</FONT><FONT COLOR="#000000">ExistsI inj z
</FONT><FONT COLOR="#000000">Refl
</FONT><FONT COLOR="#000000">Unfold LeftC In H9
</FONT><FONT COLOR="#000000">ExistsE H9
</FONT><FONT COLOR="#000000">AndE H10
</FONT><FONT COLOR="#000000">ExistsI z
</FONT><FONT COLOR="#000000">Unfold IsSubsetAlg
</FONT><FONT COLOR="#000000">ExistsI inj
</FONT><FONT COLOR="#000000">Repeat AndI Then Try Assumption
</FONT><FONT COLOR="#000000">Exit
</FONT><FONT COLOR="#000000">
</FONT><FONT COLOR="#0000FF">Prove exis_SubsetAlg : 
</FONT><FONT COLOR="#0000FF">                    @I:*s-&gt;*s. FirstO I -&gt;
</FONT><FONT COLOR="#0000FF">                    @R:*s. @opsR:I R. @Inv:R-&gt;*p.
</FONT><FONT COLOR="#0000FF">                    IsInvar I R Inv opsR -&gt;
</FONT><FONT COLOR="#0000FF">                    ExK S:*s. Ex opsS: I S. 
</FONT><FONT COLOR="#0000FF">                    IsSubsetAlg I R opsR Inv S opsS
</FONT><FONT COLOR="#000000">Intros
</FONT><FONT COLOR="#000000">Apply exis_SubsetAlg_Bisim
</FONT><FONT COLOR="#000000">Assumption
</FONT><FONT COLOR="#000000">First (\r1,r2:R. Inv r1 /\ r1=r2) &lt;===&gt; Restr ((=) R) Inv
</FONT><FONT COLOR="#000000">Apply equiv_predR
</FONT><FONT COLOR="#000000">Unfold Restr
</FONT><FONT COLOR="#000000">Intros
</FONT><FONT COLOR="#000000">Apply equiv_prop Then Intros
</FONT><FONT COLOR="#000000">AndE H2
</FONT><FONT COLOR="#000000">Lewrite 2 H4
</FONT><FONT COLOR="#000000">Repeat AndI Then Assumption
</FONT><FONT COLOR="#000000">AndE H2
</FONT><FONT COLOR="#000000">AndE H4
</FONT><FONT COLOR="#000000">AndI Then Assumption
</FONT><FONT COLOR="#000000">Intro
</FONT><FONT COLOR="#000000">Rewrite H2
</FONT><FONT COLOR="#000000">Unfold Bisim
</FONT><FONT COLOR="#000000">Apply Sim_FirstO_Restr
</FONT><FONT COLOR="#000000">Assumption
</FONT><FONT COLOR="#000000">Rewrite Sim_is
</FONT><FONT COLOR="#000000">Apply FirstO__SimplyT
</FONT><FONT COLOR="#000000">Assumption
</FONT><FONT COLOR="#000000">Unfold Restr
</FONT><FONT COLOR="#000000">Repeat AndI Then Try Assumption
</FONT><FONT COLOR="#000000">Refl
</FONT><FONT COLOR="#000000">Exit
</FONT><FONT COLOR="#000000">
</FONT><FONT COLOR="#000000">
</FONT><FONT COLOR="#000000">--------------------------
</FONT><FONT COLOR="#000000">-- QUOTIENTS OF SUBSETS --
</FONT><FONT COLOR="#000000">--------------------------
</FONT><FONT COLOR="#000000">
</FONT><FONT COLOR="#000000">-- By combining exis_QuotAlg and exis_SubsetAlg
</FONT><FONT COLOR="#0000FF">prove exis_QuotSubsetAlg : @I:*s-&gt;*s. FirstO I -&gt;
</FONT><FONT COLOR="#0000FF">                @R:*s. @opsR:I R. @(~~):R-&gt;R-&gt;*p. @Inv:R-&gt;*p.
</FONT><FONT COLOR="#0000FF">                IsERon (~~) Inv -&gt; 
</FONT><FONT COLOR="#0000FF">                Bisim I R (~~) opsR -&gt;
</FONT><FONT COLOR="#0000FF">                IsInvar I R Inv opsR -&gt; 
</FONT><FONT COLOR="#0000FF">                ExK Q:*s. Ex opsQ: I Q. 
</FONT><FONT COLOR="#0000FF">                IsQuotSubsetAlg I R opsR (~~) Inv Q opsQ
</FONT><FONT COLOR="#000000">Intros
</FONT><FONT COLOR="#000000">ExistsE exis_SubsetAlg On H3
</FONT><FONT COLOR="#000000">Assumption
</FONT><FONT COLOR="#000000">ExistsE H5
</FONT><FONT COLOR="#000000">Unfold IsSubsetAlg In H6
</FONT><FONT COLOR="#000000">ExistsE H6
</FONT><FONT COLOR="#000000">AndE H7
</FONT><FONT COLOR="#000000">AndE H9
</FONT><FONT COLOR="#000000">Let (~) := \s1,s2:S. inj s1 ~~ inj s2
</FONT><FONT COLOR="#000000">First Bisim I S (~) opsS
</FONT><FONT COLOR="#000000">First Sim I R R (Restr (~~) Inv) opsR opsR
</FONT><FONT COLOR="#000000">Apply Sim_FirstO_Restr
</FONT><FONT COLOR="#000000">Assumption
</FONT><FONT COLOR="#000000">Unfold Restr
</FONT><FONT COLOR="#000000">Repeat AndI Then Assumption
</FONT><FONT COLOR="#000000">Intro
</FONT><FONT COLOR="#000000">Forward SimFirstO_Trans On H12, H11
</FONT><FONT COLOR="#000000">Assumption
</FONT><FONT COLOR="#000000">First Comp (Restr (~~) Inv) (\r:R.\s:S. r = inj s) &lt;===&gt; 
</FONT><FONT COLOR="#000000">      (\r:R.\s:S. Inv r /\ r ~~ inj s)
</FONT><FONT COLOR="#000000">Apply equiv_predR
</FONT><FONT COLOR="#000000">Intros
</FONT><FONT COLOR="#000000">Unfold Comp
</FONT><FONT COLOR="#000000">Apply equiv_prop Then Intro
</FONT><FONT COLOR="#000000">ExistsE H14
</FONT><FONT COLOR="#000000">Unfold Restr In H15
</FONT><FONT COLOR="#000000">AndE H15
</FONT><FONT COLOR="#000000">AndE H16
</FONT><FONT COLOR="#000000">AndE H19
</FONT><FONT COLOR="#000000">AndI
</FONT><FONT COLOR="#000000">Assumption
</FONT><FONT COLOR="#000000">Lewrite H17
</FONT><FONT COLOR="#000000">Assumption
</FONT><FONT COLOR="#000000">AndE H14
</FONT><FONT COLOR="#000000">ExistsI inj b
</FONT><FONT COLOR="#000000">Unfold Restr
</FONT><FONT COLOR="#000000">Repeat AndI Then Try Assumption
</FONT><FONT COLOR="#000000">Rewrite H10
</FONT><FONT COLOR="#000000">Apply Image_f_f_x
</FONT><FONT COLOR="#000000">Refl
</FONT><FONT COLOR="#000000">Intro
</FONT><FONT COLOR="#000000">Rewrite H14 In H13
</FONT><FONT COLOR="#000000">Hide H13
</FONT><FONT COLOR="#000000">Forward Sim_sym On H15
</FONT><FONT COLOR="#000000">Apply FirstO__SimplyT
</FONT><FONT COLOR="#000000">Assumption
</FONT><FONT COLOR="#000000">Forward SimFirstO_Trans On H16, H15
</FONT><FONT COLOR="#000000">Assumption
</FONT><FONT COLOR="#000000">First (Comp (Inverse (\r:R.\s:S. Inv r /\ r ~~ inj s)) 
</FONT><FONT COLOR="#000000">            (\r:R.\s:S. Inv r /\ r ~~ inj s)) &lt;===&gt; (~)
</FONT><FONT COLOR="#000000">Apply equiv_predR
</FONT><FONT COLOR="#000000">Intros
</FONT><FONT COLOR="#000000">Unfold Inverse
</FONT><FONT COLOR="#000000">Unfold Comp
</FONT><FONT COLOR="#000000">Unfold (~)
</FONT><FONT COLOR="#000000">Apply equiv_prop Then Intro
</FONT><FONT COLOR="#000000">ExistsE H18
</FONT><FONT COLOR="#000000">AndE H19
</FONT><FONT COLOR="#000000">AndE H20
</FONT><FONT COLOR="#000000">AndE H21
</FONT><FONT COLOR="#000000">Unfold IsERon In H1
</FONT><FONT COLOR="#000000">AndE H1
</FONT><FONT COLOR="#000000">AndE H27
</FONT><FONT COLOR="#000000">Apply H29 On H25
</FONT><FONT COLOR="#000000">Rewrite H10 Then Apply Image_f_f_x
</FONT><FONT COLOR="#000000">Assumption
</FONT><FONT COLOR="#000000">Rewrite H10 Then Apply Image_f_f_x
</FONT><FONT COLOR="#000000">Apply H28
</FONT><FONT COLOR="#000000">Assumption
</FONT><FONT COLOR="#000000">Rewrite H10 Then Apply Image_f_f_x
</FONT><FONT COLOR="#000000">Assumption
</FONT><FONT COLOR="#000000">ExistsI inj a
</FONT><FONT COLOR="#000000">Repeat AndI
</FONT><FONT COLOR="#000000">Rewrite H10 Then Apply Image_f_f_x
</FONT><FONT COLOR="#000000">Unfold IsERon In H1
</FONT><FONT COLOR="#000000">AndE H1
</FONT><FONT COLOR="#000000">Apply H19
</FONT><FONT COLOR="#000000">Rewrite H10 Then Apply Image_f_f_x
</FONT><FONT COLOR="#000000">Rewrite H10 Then Apply Image_f_f_x
</FONT><FONT COLOR="#000000">Assumption
</FONT><FONT COLOR="#000000">Intro
</FONT><FONT COLOR="#000000">Unfold Bisim
</FONT><FONT COLOR="#000000">Lewrite H18
</FONT><FONT COLOR="#000000">Assumption
</FONT><FONT COLOR="#000000">First IsER (~)
</FONT><FONT COLOR="#000000">Unfold IsERon In H1
</FONT><FONT COLOR="#000000">AndE H1
</FONT><FONT COLOR="#000000">AndE H13
</FONT><FONT COLOR="#000000">Unfold (~)
</FONT><FONT COLOR="#000000">Unfold IsER
</FONT><FONT COLOR="#000000">Repeat AndI
</FONT><FONT COLOR="#000000">Intro
</FONT><FONT COLOR="#000000">Apply H12
</FONT><FONT COLOR="#000000">Rewrite H10 Then Apply Image_f_f_x
</FONT><FONT COLOR="#000000">Intros 2
</FONT><FONT COLOR="#000000">Apply H14
</FONT><FONT COLOR="#000000">Rewrite H10 Then Apply Image_f_f_x
</FONT><FONT COLOR="#000000">Rewrite H10 Then Apply Image_f_f_x
</FONT><FONT COLOR="#000000">Intros 3
</FONT><FONT COLOR="#000000">Apply H15
</FONT><FONT COLOR="#000000">Rewrite H10 Then Apply Image_f_f_x
</FONT><FONT COLOR="#000000">Rewrite H10 Then Apply Image_f_f_x
</FONT><FONT COLOR="#000000">Rewrite H10 Then Apply Image_f_f_x
</FONT><FONT COLOR="#000000">Intros
</FONT><FONT COLOR="#000000">ExistsE exis_QuotAlg On H13
</FONT><FONT COLOR="#000000">Assumption
</FONT><FONT COLOR="#000000">Assumption
</FONT><FONT COLOR="#000000">ExistsI Q
</FONT><FONT COLOR="#000000">ExistsE H15
</FONT><FONT COLOR="#000000">ExistsI opsQ
</FONT><FONT COLOR="#000000">Unfold IsQuotAlg In H16
</FONT><FONT COLOR="#000000">ExistsE H16
</FONT><FONT COLOR="#000000">AndE H17
</FONT><FONT COLOR="#000000">AndE H19
</FONT><FONT COLOR="#000000">Unfold IsQuotSubsetAlg
</FONT><FONT COLOR="#000000">Let Rel := \r:R.\q:Q. Ex s:S. r = inj s /\ q = surj s
</FONT><FONT COLOR="#000000">ExistsI Rel
</FONT><FONT COLOR="#000000">Repeat AndI
</FONT><FONT COLOR="#000000">Rewrite H10
</FONT><FONT COLOR="#000000">Unfold Rel
</FONT><FONT COLOR="#000000">Apply equiv_predQ
</FONT><FONT COLOR="#000000">Intro
</FONT><FONT COLOR="#000000">Apply equiv_prop Then Intro
</FONT><FONT COLOR="#000000">Unfold Dom
</FONT><FONT COLOR="#000000">Unfold Image In H22
</FONT><FONT COLOR="#000000">ExistsE H22
</FONT><FONT COLOR="#000000">ExistsI surj a1
</FONT><FONT COLOR="#000000">ExistsI a1
</FONT><FONT COLOR="#000000">AndI
</FONT><FONT COLOR="#000000">Rewrite H23
</FONT><FONT COLOR="#000000">Refl
</FONT><FONT COLOR="#000000">Refl
</FONT><FONT COLOR="#000000">Unfold Dom In H22
</FONT><FONT COLOR="#000000">ExistsE H22
</FONT><FONT COLOR="#000000">ExistsE H23
</FONT><FONT COLOR="#000000">AndE H24
</FONT><FONT COLOR="#000000">Rewrite H25
</FONT><FONT COLOR="#000000">Apply Image_f_f_x
</FONT><FONT COLOR="#000000">Intro
</FONT><FONT COLOR="#000000">Unfold Rel
</FONT><FONT COLOR="#000000">ExistsE H20 On q
</FONT><FONT COLOR="#000000">ExistsI inj a
</FONT><FONT COLOR="#000000">ExistsI a
</FONT><FONT COLOR="#000000">AndI
</FONT><FONT COLOR="#000000">Refl
</FONT><FONT COLOR="#000000">Rewrite H23
</FONT><FONT COLOR="#000000">Refl
</FONT><FONT COLOR="#000000">Unfold Rel
</FONT><FONT COLOR="#000000">Intros
</FONT><FONT COLOR="#000000">ExistsE H22
</FONT><FONT COLOR="#000000">ExistsE H23
</FONT><FONT COLOR="#000000">AndE H24
</FONT><FONT COLOR="#000000">AndE H25
</FONT><FONT COLOR="#000000">Rewrite H26
</FONT><FONT COLOR="#000000">Rewrite H27
</FONT><FONT COLOR="#000000">Rewrite H28
</FONT><FONT COLOR="#000000">Rewrite H29
</FONT><FONT COLOR="#000000">Lewrite H18
</FONT><FONT COLOR="#000000">Unfold (~)
</FONT><FONT COLOR="#000000">Refl
</FONT><FONT COLOR="#000000">Forward SimFirstO_Trans On H11, H21
</FONT><FONT COLOR="#000000">Assumption
</FONT><FONT COLOR="#000000">First Comp (\r:R.\s:S. r = inj s) (\r:S.\q:Q. q = surj r) &lt;===&gt; Rel
</FONT><FONT COLOR="#000000">Unfold Rel
</FONT><FONT COLOR="#000000">Unfold Comp
</FONT><FONT COLOR="#000000">Refl
</FONT><FONT COLOR="#000000">Intro
</FONT><FONT COLOR="#000000">Lewrite H23
</FONT><FONT COLOR="#000000">Assumption
</FONT><FONT COLOR="#000000">Exit
</FONT><FONT COLOR="#000000">
</FONT></PRE>
</BODY>
</HTML>
