<HTML>
<HEAD>
<TITLE>lolplus/library (with proofs)</TITLE>
</HEAD>
<BODY BGCOLOR="#FFFFFF", TEXT="#000000">
<PRE><FONT COLOR="#000000"></FONT><FONT COLOR="#000000">-- File: library
</FONT><FONT COLOR="#000000">
</FONT><FONT COLOR="#000000">-- This file gives our general theory of ADTs, leading to the main theorems.
</FONT><FONT COLOR="#000000">-- It follows the structure of Sections 6.7.4, 6.7.5, and 6.7.6, and is hence
</FONT><FONT COLOR="#000000">-- divided in the following parts.
</FONT><FONT COLOR="#000000">--  4. Quotients and Subsets (Section 6.7.4)
</FONT><FONT COLOR="#000000">--  5. Sensible and well-behaved (Section 6.7.5)
</FONT><FONT COLOR="#000000">--  6. Main results (Section 6.7.6)
</FONT><FONT COLOR="#000000">
</FONT><FONT COLOR="#000000">
</FONT><FONT COLOR="#000000">Path "../lol"
</FONT><FONT COLOR="#000000">Path "../lolExtra"
</FONT><FONT COLOR="#000000">Load "lambdaLplus"
</FONT><FONT COLOR="#000000">Load "parametricity"
</FONT><FONT COLOR="#000000">
</FONT><FONT COLOR="#000000">
</FONT><FONT COLOR="#000000">----------------------------------------------------
</FONT><FONT COLOR="#000000">----------------------------------------------------
</FONT><FONT COLOR="#000000">--                                                --
</FONT><FONT COLOR="#000000">--  4. Q U O T I E N T S   A N D   S U B S E T S  --
</FONT><FONT COLOR="#000000">--                                                --
</FONT><FONT COLOR="#000000">----------------------------------------------------
</FONT><FONT COLOR="#000000">----------------------------------------------------
</FONT><FONT COLOR="#000000">
</FONT><FONT COLOR="#0000FF">Def IsQuotAlg := \I:*s-&gt;*s.
</FONT><FONT COLOR="#0000FF">              \R:*s. \opsR : I R. \(~~):R-&gt;R-&gt;*p. \Q:*s. \opsQ : I Q.
</FONT><FONT COLOR="#0000FF">              Ex surj:R-&gt;Q.
</FONT><FONT COLOR="#0000FF">                (@r,r':R. r ~~ r' &lt;=&gt; surj r = surj r') /\
</FONT><FONT COLOR="#0000FF">                IsSurjection surj /\
</FONT><FONT COLOR="#0000FF">                Sim I R Q (\r:R.\q:Q. q = surj r) opsR opsQ  :
</FONT><FONT COLOR="#0000FF">              @I:*s-&gt;*s.@R:*s. I R -&gt; (R-&gt;R-&gt;*p) -&gt; @Q:*s. I Q -&gt; *p
</FONT><FONT COLOR="#000000">
</FONT><FONT COLOR="#0000FF">Def IsSubsetAlg := \I:*s-&gt;*s.\R:*s. \opsR : I R. \Inv:R-&gt;*p. \S:*s.\opsS : I S.
</FONT><FONT COLOR="#0000FF">                Ex inj:S-&gt;R.
</FONT><FONT COLOR="#0000FF">                  IsInjection inj /\
</FONT><FONT COLOR="#0000FF">                  (Inv &lt;==&gt; Image inj) /\
</FONT><FONT COLOR="#0000FF">                  Sim I R S (\r:R.\s:S. r = inj s) opsR opsS  :
</FONT><FONT COLOR="#0000FF">                @I:*s-&gt;*s. @R:*s. I R -&gt; (R-&gt;*p) -&gt; @S:*s. I S -&gt; *p
</FONT><FONT COLOR="#000000">
</FONT><FONT COLOR="#0000FF">Def IsQuotSubsetAlg := \I:*s-&gt;*s.
</FONT><FONT COLOR="#0000FF">               \R:*s. \opsR : I R. \(~~) : R-&gt;R-&gt;*p. \Inv:R-&gt;*p. 
</FONT><FONT COLOR="#0000FF">               \Q:*s. \opsQ : I Q.
</FONT><FONT COLOR="#0000FF">                     ExR Rel:R-&gt;Q-&gt;*p.
</FONT><FONT COLOR="#0000FF">                     (Inv &lt;==&gt; Dom Rel) /\
</FONT><FONT COLOR="#0000FF">                     (@q:Q. Ex r:R. Rel r q) /\
</FONT><FONT COLOR="#0000FF">                     (@r,r':R. @q,q':Q. Rel r q -&gt; Rel r' q' -&gt; 
</FONT><FONT COLOR="#0000FF">                                        r~~r' &lt;=&gt; q=q') /\
</FONT><FONT COLOR="#0000FF">                     Sim I R Q Rel opsR opsQ : 
</FONT><FONT COLOR="#0000FF">              @I:*s-&gt;*s.@R:*s. I R -&gt; (R-&gt;R-&gt;*p) -&gt; (R-&gt;*p) -&gt; @Q:*s. I Q -&gt; *p
</FONT><FONT COLOR="#000000">
</FONT><FONT COLOR="#FF0000">var exis_QuotAlg :@I:*s-&gt;*s. FirstO I -&gt;
</FONT><FONT COLOR="#FF0000">                  @R:*s. @opsR:I R. @(~~):R-&gt;R-&gt;*p. 
</FONT><FONT COLOR="#FF0000">                  Bisim I R (~~) opsR -&gt; IsER (~~) -&gt;
</FONT><FONT COLOR="#FF0000">                  ExK Q:*s. Ex opsQ: I Q. 
</FONT><FONT COLOR="#FF0000">                  IsQuotAlg I R opsR (~~) Q opsQ
</FONT><FONT COLOR="#000000">
</FONT><FONT COLOR="#000000">
</FONT><FONT COLOR="#FF0000">var exis_SubsetAlg :  @I:*s-&gt;*s. FirstO I -&gt;
</FONT><FONT COLOR="#FF0000">                    @R:*s. @opsR:I R. @Inv:R-&gt;*p.
</FONT><FONT COLOR="#FF0000">                    IsInvar I R Inv opsR -&gt;
</FONT><FONT COLOR="#FF0000">                    ExK S:*s. Ex opsS: I S. 
</FONT><FONT COLOR="#FF0000">                    IsSubsetAlg I R opsR Inv S opsS
</FONT><FONT COLOR="#000000">
</FONT><FONT COLOR="#0000FF">Prove exis_QuotSubsetAlg : @I:*s-&gt;*s. FirstO I -&gt;
</FONT><FONT COLOR="#0000FF">                @R:*s. @opsR:I R. @(~~):R-&gt;R-&gt;*p. @Inv:R-&gt;*p.
</FONT><FONT COLOR="#0000FF">                IsERon (~~) Inv -&gt; 
</FONT><FONT COLOR="#0000FF">                Bisim I R (~~) opsR -&gt;
</FONT><FONT COLOR="#0000FF">                IsInvar I R Inv opsR -&gt; 
</FONT><FONT COLOR="#0000FF">                ExK Q:*s. Ex opsQ: I Q. 
</FONT><FONT COLOR="#0000FF">                IsQuotSubsetAlg I R opsR (~~) Inv Q opsQ
</FONT><FONT COLOR="#000000">Intros
</FONT><FONT COLOR="#000000">ExistsE exis_SubsetAlg On H3
</FONT><FONT COLOR="#000000">Assumption
</FONT><FONT COLOR="#000000">ExistsE H5
</FONT><FONT COLOR="#000000">Unfold IsSubsetAlg In H6
</FONT><FONT COLOR="#000000">ExistsE H6
</FONT><FONT COLOR="#000000">AndE H7
</FONT><FONT COLOR="#000000">AndE H9
</FONT><FONT COLOR="#000000">Let (~) := \s1,s2:S. inj s1 ~~ inj s2
</FONT><FONT COLOR="#000000">First Bisim I S (~) opsS
</FONT><FONT COLOR="#000000">First Sim I R R (Restr (~~) Inv) opsR opsR
</FONT><FONT COLOR="#000000">Apply Sim_FirstO_Restr
</FONT><FONT COLOR="#000000">Assumption
</FONT><FONT COLOR="#000000">Unfold Restr
</FONT><FONT COLOR="#000000">Repeat AndI Then Assumption
</FONT><FONT COLOR="#000000">Intro
</FONT><FONT COLOR="#000000">Forward SimFirstO_Trans On H12, H11
</FONT><FONT COLOR="#000000">Assumption
</FONT><FONT COLOR="#000000">First Comp (Restr (~~) Inv) (\r:R.\s:S. r = inj s) &lt;===&gt; 
</FONT><FONT COLOR="#000000">      (\r:R.\s:S. Inv r /\ r ~~ inj s)
</FONT><FONT COLOR="#000000">Apply equiv_predR
</FONT><FONT COLOR="#000000">Intros
</FONT><FONT COLOR="#000000">Unfold Comp
</FONT><FONT COLOR="#000000">Apply equiv_prop Then Intro
</FONT><FONT COLOR="#000000">ExistsE H14
</FONT><FONT COLOR="#000000">Unfold Restr In H15
</FONT><FONT COLOR="#000000">AndE H15
</FONT><FONT COLOR="#000000">AndE H16
</FONT><FONT COLOR="#000000">AndE H19
</FONT><FONT COLOR="#000000">AndI
</FONT><FONT COLOR="#000000">Assumption
</FONT><FONT COLOR="#000000">Lewrite H17
</FONT><FONT COLOR="#000000">Assumption
</FONT><FONT COLOR="#000000">AndE H14
</FONT><FONT COLOR="#000000">ExistsI inj b
</FONT><FONT COLOR="#000000">Unfold Restr
</FONT><FONT COLOR="#000000">Repeat AndI Then Try Assumption
</FONT><FONT COLOR="#000000">Rewrite H10
</FONT><FONT COLOR="#000000">Apply Image_f_f_x
</FONT><FONT COLOR="#000000">Refl
</FONT><FONT COLOR="#000000">Intro
</FONT><FONT COLOR="#000000">Rewrite H14 In H13
</FONT><FONT COLOR="#000000">Hide H13
</FONT><FONT COLOR="#000000">Forward Sim_sym On H15
</FONT><FONT COLOR="#000000">Apply FirstO__SimplyT
</FONT><FONT COLOR="#000000">Assumption
</FONT><FONT COLOR="#000000">Forward SimFirstO_Trans On H16, H15
</FONT><FONT COLOR="#000000">Assumption
</FONT><FONT COLOR="#000000">First (Comp (Inverse (\r:R.\s:S. Inv r /\ r ~~ inj s)) 
</FONT><FONT COLOR="#000000">            (\r:R.\s:S. Inv r /\ r ~~ inj s)) &lt;===&gt; (~)
</FONT><FONT COLOR="#000000">Apply equiv_predR
</FONT><FONT COLOR="#000000">Intros
</FONT><FONT COLOR="#000000">Unfold Inverse
</FONT><FONT COLOR="#000000">Unfold Comp
</FONT><FONT COLOR="#000000">Unfold (~)
</FONT><FONT COLOR="#000000">Apply equiv_prop Then Intro
</FONT><FONT COLOR="#000000">ExistsE H18
</FONT><FONT COLOR="#000000">AndE H19
</FONT><FONT COLOR="#000000">AndE H20
</FONT><FONT COLOR="#000000">AndE H21
</FONT><FONT COLOR="#000000">Unfold IsERon In H1
</FONT><FONT COLOR="#000000">AndE H1
</FONT><FONT COLOR="#000000">AndE H27
</FONT><FONT COLOR="#000000">Apply H29 On H25
</FONT><FONT COLOR="#000000">Rewrite H10 Then Apply Image_f_f_x
</FONT><FONT COLOR="#000000">Assumption
</FONT><FONT COLOR="#000000">Rewrite H10 Then Apply Image_f_f_x
</FONT><FONT COLOR="#000000">Apply H28
</FONT><FONT COLOR="#000000">Assumption
</FONT><FONT COLOR="#000000">Rewrite H10 Then Apply Image_f_f_x
</FONT><FONT COLOR="#000000">Assumption
</FONT><FONT COLOR="#000000">ExistsI inj a
</FONT><FONT COLOR="#000000">Repeat AndI
</FONT><FONT COLOR="#000000">Rewrite H10 Then Apply Image_f_f_x
</FONT><FONT COLOR="#000000">Unfold IsERon In H1
</FONT><FONT COLOR="#000000">AndE H1
</FONT><FONT COLOR="#000000">Apply H19
</FONT><FONT COLOR="#000000">Rewrite H10 Then Apply Image_f_f_x
</FONT><FONT COLOR="#000000">Rewrite H10 Then Apply Image_f_f_x
</FONT><FONT COLOR="#000000">Assumption
</FONT><FONT COLOR="#000000">Intro
</FONT><FONT COLOR="#000000">Unfold Bisim
</FONT><FONT COLOR="#000000">Lewrite H18
</FONT><FONT COLOR="#000000">Assumption
</FONT><FONT COLOR="#000000">First IsER (~)
</FONT><FONT COLOR="#000000">Unfold IsERon In H1
</FONT><FONT COLOR="#000000">AndE H1
</FONT><FONT COLOR="#000000">AndE H13
</FONT><FONT COLOR="#000000">Unfold (~)
</FONT><FONT COLOR="#000000">Unfold IsER
</FONT><FONT COLOR="#000000">Repeat AndI
</FONT><FONT COLOR="#000000">Intro
</FONT><FONT COLOR="#000000">Apply H12
</FONT><FONT COLOR="#000000">Rewrite H10 Then Apply Image_f_f_x
</FONT><FONT COLOR="#000000">Intros 2
</FONT><FONT COLOR="#000000">Apply H14
</FONT><FONT COLOR="#000000">Rewrite H10 Then Apply Image_f_f_x
</FONT><FONT COLOR="#000000">Rewrite H10 Then Apply Image_f_f_x
</FONT><FONT COLOR="#000000">Intros 3
</FONT><FONT COLOR="#000000">Apply H15
</FONT><FONT COLOR="#000000">Rewrite H10 Then Apply Image_f_f_x
</FONT><FONT COLOR="#000000">Rewrite H10 Then Apply Image_f_f_x
</FONT><FONT COLOR="#000000">Rewrite H10 Then Apply Image_f_f_x
</FONT><FONT COLOR="#000000">Intros
</FONT><FONT COLOR="#000000">ExistsE exis_QuotAlg On H13
</FONT><FONT COLOR="#000000">Assumption
</FONT><FONT COLOR="#000000">Assumption
</FONT><FONT COLOR="#000000">ExistsI Q
</FONT><FONT COLOR="#000000">ExistsE H15
</FONT><FONT COLOR="#000000">ExistsI opsQ
</FONT><FONT COLOR="#000000">Unfold IsQuotAlg In H16
</FONT><FONT COLOR="#000000">ExistsE H16
</FONT><FONT COLOR="#000000">AndE H17
</FONT><FONT COLOR="#000000">AndE H19
</FONT><FONT COLOR="#000000">Unfold IsQuotSubsetAlg
</FONT><FONT COLOR="#000000">Let Rel := \r:R.\q:Q. Ex s:S. r = inj s /\ q = surj s
</FONT><FONT COLOR="#000000">ExistsI Rel
</FONT><FONT COLOR="#000000">Repeat AndI
</FONT><FONT COLOR="#000000">Rewrite H10
</FONT><FONT COLOR="#000000">Unfold Rel
</FONT><FONT COLOR="#000000">Apply equiv_predQ
</FONT><FONT COLOR="#000000">Intro
</FONT><FONT COLOR="#000000">Apply equiv_prop Then Intro
</FONT><FONT COLOR="#000000">Unfold Dom
</FONT><FONT COLOR="#000000">Unfold Image In H22
</FONT><FONT COLOR="#000000">ExistsE H22
</FONT><FONT COLOR="#000000">ExistsI surj a1
</FONT><FONT COLOR="#000000">ExistsI a1
</FONT><FONT COLOR="#000000">AndI
</FONT><FONT COLOR="#000000">Rewrite H23
</FONT><FONT COLOR="#000000">Refl
</FONT><FONT COLOR="#000000">Refl
</FONT><FONT COLOR="#000000">Unfold Dom In H22
</FONT><FONT COLOR="#000000">ExistsE H22
</FONT><FONT COLOR="#000000">ExistsE H23
</FONT><FONT COLOR="#000000">AndE H24
</FONT><FONT COLOR="#000000">Rewrite H25
</FONT><FONT COLOR="#000000">Apply Image_f_f_x
</FONT><FONT COLOR="#000000">Intro
</FONT><FONT COLOR="#000000">Unfold Rel
</FONT><FONT COLOR="#000000">ExistsE H20 On q
</FONT><FONT COLOR="#000000">ExistsI inj a
</FONT><FONT COLOR="#000000">ExistsI a
</FONT><FONT COLOR="#000000">AndI
</FONT><FONT COLOR="#000000">Refl
</FONT><FONT COLOR="#000000">Rewrite H23
</FONT><FONT COLOR="#000000">Refl
</FONT><FONT COLOR="#000000">Unfold Rel
</FONT><FONT COLOR="#000000">Intros
</FONT><FONT COLOR="#000000">ExistsE H22
</FONT><FONT COLOR="#000000">ExistsE H23
</FONT><FONT COLOR="#000000">AndE H24
</FONT><FONT COLOR="#000000">AndE H25
</FONT><FONT COLOR="#000000">Rewrite H26
</FONT><FONT COLOR="#000000">Rewrite H27
</FONT><FONT COLOR="#000000">Rewrite H28
</FONT><FONT COLOR="#000000">Rewrite H29
</FONT><FONT COLOR="#000000">Lewrite H18
</FONT><FONT COLOR="#000000">Unfold (~)
</FONT><FONT COLOR="#000000">Refl
</FONT><FONT COLOR="#000000">Forward SimFirstO_Trans On H11, H21
</FONT><FONT COLOR="#000000">Assumption
</FONT><FONT COLOR="#000000">First Comp (\r:R.\s:S. r = inj s) (\r:S.\q:Q. q = surj r) &lt;===&gt; Rel
</FONT><FONT COLOR="#000000">Unfold Rel
</FONT><FONT COLOR="#000000">Unfold Comp
</FONT><FONT COLOR="#000000">Refl
</FONT><FONT COLOR="#000000">Intro
</FONT><FONT COLOR="#000000">Lewrite H23
</FONT><FONT COLOR="#000000">Assumption
</FONT><FONT COLOR="#000000">Exit
</FONT><FONT COLOR="#000000">
</FONT><FONT COLOR="#0000FF">Prove pack_QuotSubset : @I:*s-&gt;*s. SimplyT I -&gt;
</FONT><FONT COLOR="#0000FF">                 @R:*s. @opsR:I R. @(~~):R-&gt;R-&gt;*p.
</FONT><FONT COLOR="#0000FF">                 @Inv: R-&gt;*p.
</FONT><FONT COLOR="#0000FF">                 @Q:*s. @opsQ:I Q. IsQuotSubsetAlg I R opsR (~~) Inv Q opsQ -&gt;
</FONT><FONT COLOR="#0000FF">                 (=) (Sig X:*s. I X) (pack I R opsR) (pack I Q opsQ)
</FONT><FONT COLOR="#000000">Intros
</FONT><FONT COLOR="#000000">Unfold IsQuotSubsetAlg In H1
</FONT><FONT COLOR="#000000">ExistsE H1
</FONT><FONT COLOR="#000000">AndE H2
</FONT><FONT COLOR="#000000">AndE H4
</FONT><FONT COLOR="#000000">AndE H6
</FONT><FONT COLOR="#000000">Apply parSigma On H8
</FONT><FONT COLOR="#000000">Assumption
</FONT><FONT COLOR="#000000">Exit
</FONT><FONT COLOR="#000000">
</FONT><FONT COLOR="#000000">
</FONT><FONT COLOR="#000000">------------------------------------------------------------
</FONT><FONT COLOR="#000000">------------------------------------------------------------
</FONT><FONT COLOR="#000000">--                                                        --
</FONT><FONT COLOR="#000000">--  5. S E N S I B L E   A N D   W E L L - B E H A V E D  --
</FONT><FONT COLOR="#000000">--                                                        --
</FONT><FONT COLOR="#000000">------------------------------------------------------------
</FONT><FONT COLOR="#000000">------------------------------------------------------------
</FONT><FONT COLOR="#000000">
</FONT><FONT COLOR="#0000FF">Def Sensible := \I:*s-&gt;*s. \Spec : @R:*s.(R-&gt;R-&gt;*p) -&gt; (R-&gt;*p) -&gt; I R -&gt; *p.
</FONT><FONT COLOR="#0000FF">                 @R:*s.@opsR:I R.@(~~):R-&gt;R-&gt;*p. @Inv:R-&gt;*p.@Q:*s.@opsQ:I Q.
</FONT><FONT COLOR="#0000FF">                 IsQuotSubsetAlg I R opsR (~~) Inv Q opsQ -&gt;
</FONT><FONT COLOR="#0000FF">                 Spec R (~~) Inv opsR -&gt; Spec Q ((=) Q) (\q:Q.True) opsQ
</FONT><FONT COLOR="#000000">
</FONT><FONT COLOR="#0000FF">Def WB := \I:*s-&gt;*s.
</FONT><FONT COLOR="#0000FF">     \Spec: (@R:*s.(R-&gt;R-&gt;*p) -&gt; (R-&gt;*p) -&gt; I R -&gt; *p).
</FONT><FONT COLOR="#0000FF">     @Y,Z:*s. 
</FONT><FONT COLOR="#0000FF">     @RelY:Y-&gt;Y-&gt;*p.  @RelZ:Z-&gt;Z-&gt;*p.
</FONT><FONT COLOR="#0000FF">     @InvY:Y-&gt;*p. @InvZ:Z-&gt;*p. IsERon RelY InvY -&gt; IsERon RelZ InvZ -&gt;
</FONT><FONT COLOR="#0000FF">     @opsY:I Y. @opsZ : I Z.
</FONT><FONT COLOR="#0000FF">     (ExR (~):Y-&gt;Z-&gt;*p.
</FONT><FONT COLOR="#0000FF">       Sim I Y Z (~) opsY opsZ /\
</FONT><FONT COLOR="#0000FF">       (Restr RelY InvY &lt;===&gt; LeftC (~)) /\
</FONT><FONT COLOR="#0000FF">       (Restr RelZ InvZ &lt;===&gt; RightC (~)) /\
</FONT><FONT COLOR="#0000FF">       IsZclosed (~)) -&gt;
</FONT><FONT COLOR="#0000FF">     Spec Y RelY InvY opsY -&gt; Spec Z RelZ InvZ opsZ
</FONT><FONT COLOR="#000000">Implicit 1 WB
</FONT><FONT COLOR="#000000">
</FONT><FONT COLOR="#000000">-- For proving properties about WB, it is easier to use the following,
</FONT><FONT COLOR="#000000">-- equivalent formulation.
</FONT><FONT COLOR="#0000FF">Def WB' := \I:*s-&gt;*s.
</FONT><FONT COLOR="#0000FF">     \Spec: (@R:*s.(R-&gt;R-&gt;*p) -&gt; (R-&gt;*p) -&gt; I R -&gt; *p).
</FONT><FONT COLOR="#0000FF">     @Y,Z:*s.
</FONT><FONT COLOR="#0000FF">     @RelY:Y-&gt;Y-&gt;*p. @RelZ:Z-&gt;Z-&gt;*p.
</FONT><FONT COLOR="#0000FF">     @InvY:Y-&gt;*p. @InvZ:Z-&gt;*p.
</FONT><FONT COLOR="#0000FF">     @opsY:I Y. @opsZ : I Z.
</FONT><FONT COLOR="#0000FF">     @(~):Y-&gt;Z-&gt;*p.
</FONT><FONT COLOR="#0000FF">       Sim I Y Z (~) opsY opsZ -&gt;
</FONT><FONT COLOR="#0000FF">       IsZclosed (~) -&gt;
</FONT><FONT COLOR="#0000FF">       (Restr RelY InvY) &lt;===&gt; LeftC (~) -&gt;
</FONT><FONT COLOR="#0000FF">       (Restr RelZ InvZ) &lt;===&gt; RightC (~) -&gt;
</FONT><FONT COLOR="#0000FF">       IsERon RelY InvY -&gt;
</FONT><FONT COLOR="#0000FF">       IsERon RelZ InvZ -&gt;
</FONT><FONT COLOR="#0000FF">       Spec Y RelY InvY opsY -&gt; Spec Z RelZ InvZ opsZ
</FONT><FONT COLOR="#000000">Implicit 1 WB'
</FONT><FONT COLOR="#000000">
</FONT><FONT COLOR="#000000">-- WB and WB' are really equivalent:
</FONT><FONT COLOR="#0000FF">Prove WB__WB' : @I:*s-&gt;*s. @Spec : (@R:*s.(R-&gt;R-&gt;*p) -&gt; (R-&gt;*p) -&gt; I R -&gt; *p).
</FONT><FONT COLOR="#0000FF">                WB' I Spec &lt;=&gt; WB I Spec
</FONT><FONT COLOR="#000000">Intros
</FONT><FONT COLOR="#000000">Unfold WB
</FONT><FONT COLOR="#000000">Unfold WB'
</FONT><FONT COLOR="#000000">Apply equiv_prop Then Intros
</FONT><FONT COLOR="#000000">ExistsE H3
</FONT><FONT COLOR="#000000">AndE H5
</FONT><FONT COLOR="#000000">AndE H7
</FONT><FONT COLOR="#000000">AndE H9
</FONT><FONT COLOR="#000000">Apply H On H11, H4 Then Assumption
</FONT><FONT COLOR="#000000">Apply H On H7 Then Try Assumption
</FONT><FONT COLOR="#000000">ExistsI (~)
</FONT><FONT COLOR="#000000">Repeat AndI Then Assumption
</FONT><FONT COLOR="#000000">Exit
</FONT><FONT COLOR="#000000">
</FONT><FONT COLOR="#0000FF">Prove WB__Sensible : @I:*s-&gt;*s. SimplyT I -&gt; 
</FONT><FONT COLOR="#0000FF">            @Spec: (@R:*s. (R-&gt;R-&gt;*p)-&gt;(R-&gt;*p)-&gt;I R-&gt;*p).
</FONT><FONT COLOR="#0000FF">            WB' I Spec -&gt; Sensible I Spec
</FONT><FONT COLOR="#000000">Intros
</FONT><FONT COLOR="#000000">Unfold Sensible
</FONT><FONT COLOR="#000000">Intros
</FONT><FONT COLOR="#000000">Unfold IsQuotSubsetAlg In H2
</FONT><FONT COLOR="#000000">ExistsE H2
</FONT><FONT COLOR="#000000">AndE H4
</FONT><FONT COLOR="#000000">AndE H6
</FONT><FONT COLOR="#000000">AndE H8
</FONT><FONT COLOR="#000000">Apply H1 On H10, H3
</FONT><FONT COLOR="#000000">Unfold IsZclosed
</FONT><FONT COLOR="#000000">Intros
</FONT><FONT COLOR="#000000">Cut z1=z2
</FONT><FONT COLOR="#000000">Intro
</FONT><FONT COLOR="#000000">Rewrite H14
</FONT><FONT COLOR="#000000">Assumption
</FONT><FONT COLOR="#000000">Lewrite H9 On H11, H12
</FONT><FONT COLOR="#000000">Rewrite H9 On H11, H11
</FONT><FONT COLOR="#000000">Refl
</FONT><FONT COLOR="#000000">Apply equiv_predR
</FONT><FONT COLOR="#000000">Intro x,y
</FONT><FONT COLOR="#000000">Apply equiv_prop Then Intros
</FONT><FONT COLOR="#000000">Unfold Restr In H11
</FONT><FONT COLOR="#000000">AndE H11
</FONT><FONT COLOR="#000000">AndE H13
</FONT><FONT COLOR="#000000">Rewrite H5 In H12
</FONT><FONT COLOR="#000000">Rewrite H5 In H15
</FONT><FONT COLOR="#000000">Unfold Dom In H16 Then ExistsE H16
</FONT><FONT COLOR="#000000">Unfold Dom In H17 Then ExistsE H17
</FONT><FONT COLOR="#000000">Unfold LeftC
</FONT><FONT COLOR="#000000">ExistsI b
</FONT><FONT COLOR="#000000">AndI
</FONT><FONT COLOR="#000000">Assumption
</FONT><FONT COLOR="#000000">Rewrite H9 On H18, H19 In H14
</FONT><FONT COLOR="#000000">Rewrite H20
</FONT><FONT COLOR="#000000">Assumption
</FONT><FONT COLOR="#000000">Unfold LeftC In H11
</FONT><FONT COLOR="#000000">ExistsE H11
</FONT><FONT COLOR="#000000">AndE H12
</FONT><FONT COLOR="#000000">Unfold Restr
</FONT><FONT COLOR="#000000">Repeat AndI
</FONT><FONT COLOR="#000000">Rewrite H5
</FONT><FONT COLOR="#000000">Unfold Dom Then ExistsI z Then Assumption
</FONT><FONT COLOR="#000000">Rewrite H9 On H13, H14
</FONT><FONT COLOR="#000000">Refl
</FONT><FONT COLOR="#000000">Rewrite H5
</FONT><FONT COLOR="#000000">Unfold Dom Then ExistsI z Then Assumption
</FONT><FONT COLOR="#000000">Apply equiv_predR
</FONT><FONT COLOR="#000000">Intro q1,q2
</FONT><FONT COLOR="#000000">Unfold Restr
</FONT><FONT COLOR="#000000">Unfold RightC
</FONT><FONT COLOR="#000000">Apply equiv_prop Then Intro
</FONT><FONT COLOR="#000000">AndE H11
</FONT><FONT COLOR="#000000">AndE H13
</FONT><FONT COLOR="#000000">ExistsE H7 On q1
</FONT><FONT COLOR="#000000">ExistsI r
</FONT><FONT COLOR="#000000">AndI
</FONT><FONT COLOR="#000000">Assumption
</FONT><FONT COLOR="#000000">Lewrite H14
</FONT><FONT COLOR="#000000">Assumption
</FONT><FONT COLOR="#000000">Repeat AndI Then Try Exact true_True
</FONT><FONT COLOR="#000000">ExistsE H11
</FONT><FONT COLOR="#000000">AndE H12
</FONT><FONT COLOR="#000000">Lewrite H9 On H13, H14
</FONT><FONT COLOR="#000000">Rewrite H9 On H13, H13
</FONT><FONT COLOR="#000000">Refl
</FONT><FONT COLOR="#000000">Unfold IsERon
</FONT><FONT COLOR="#000000">Repeat AndI Then Intros
</FONT><FONT COLOR="#000000">Rewrite H5 In H11
</FONT><FONT COLOR="#000000">Unfold Dom In H12 Then ExistsE H12
</FONT><FONT COLOR="#000000">Rewrite H9 On H13, H13
</FONT><FONT COLOR="#000000">Refl
</FONT><FONT COLOR="#000000">Rewrite H5 In H11
</FONT><FONT COLOR="#000000">Rewrite H5 In H12
</FONT><FONT COLOR="#000000">Unfold Dom In H14 Then ExistsE H14
</FONT><FONT COLOR="#000000">Unfold Dom In H15 Then ExistsE H15
</FONT><FONT COLOR="#000000">Rewrite H9 On H17, H16
</FONT><FONT COLOR="#000000">Apply is_sym
</FONT><FONT COLOR="#000000">Lewrite H9 On H16, H17
</FONT><FONT COLOR="#000000">Assumption
</FONT><FONT COLOR="#000000">Rewrite H5 In H11
</FONT><FONT COLOR="#000000">Rewrite H5 In H12
</FONT><FONT COLOR="#000000">Rewrite H5 In H13
</FONT><FONT COLOR="#000000">Unfold Dom In H16 Then ExistsE H16
</FONT><FONT COLOR="#000000">Unfold Dom In H17 Then ExistsE H17
</FONT><FONT COLOR="#000000">Unfold Dom In H18 Then ExistsE H18
</FONT><FONT COLOR="#000000">Rewrite H9 On H19, H21
</FONT><FONT COLOR="#000000">Apply is_trans On b1
</FONT><FONT COLOR="#000000">Lewrite H9 On H19, H20
</FONT><FONT COLOR="#000000">Assumption
</FONT><FONT COLOR="#000000">Lewrite H9 On H20, H21
</FONT><FONT COLOR="#000000">Assumption
</FONT><FONT COLOR="#000000">Apply IsER__IsERon
</FONT><FONT COLOR="#000000">Apply IsER_is
</FONT><FONT COLOR="#000000">Exit
</FONT><FONT COLOR="#000000">
</FONT><FONT COLOR="#0000FF">Prove WB_Prop: @I:*s-&gt;*s. @P:*p.
</FONT><FONT COLOR="#0000FF">   WB' (\R:*s.\(~~):R-&gt;R-&gt;*p. \Inv:R-&gt;*p.\ops:I R.  P)
</FONT><FONT COLOR="#000000">Intro
</FONT><FONT COLOR="#000000">Unfold WB'
</FONT><FONT COLOR="#000000">Intros
</FONT><FONT COLOR="#000000">Assumption
</FONT><FONT COLOR="#000000">Exit
</FONT><FONT COLOR="#000000">
</FONT><FONT COLOR="#0000FF">Prove WB_Impl : @I:*s-&gt;*s. SimplyT I -&gt;
</FONT><FONT COLOR="#0000FF">   @P,Q:(@R:*s. (R-&gt;R-&gt;*p)-&gt;(R-&gt;*p)-&gt;I R-&gt;*p).
</FONT><FONT COLOR="#0000FF">   WB' P -&gt; WB' Q -&gt;
</FONT><FONT COLOR="#0000FF">   WB' (\R:*s.\(~~):R-&gt;R-&gt;*p.\Inv:R-&gt;*p.\ops:I R. 
</FONT><FONT COLOR="#0000FF">                     P R (~~) Inv ops -&gt; Q R (~~) Inv ops)
</FONT><FONT COLOR="#000000">Intros
</FONT><FONT COLOR="#000000">Unfold WB'
</FONT><FONT COLOR="#000000">Intros
</FONT><FONT COLOR="#000000">Apply H2 On RelY, InvY, H3 Then Try Assumption
</FONT><FONT COLOR="#000000">Apply H9
</FONT><FONT COLOR="#000000">Forward Sim_sym On H3
</FONT><FONT COLOR="#000000">Assumption
</FONT><FONT COLOR="#000000">Apply H1 On H11, H10 Then Try Assumption
</FONT><FONT COLOR="#000000">Apply IsZclosed_Inverse
</FONT><FONT COLOR="#000000">Assumption
</FONT><FONT COLOR="#000000">Exit
</FONT><FONT COLOR="#000000">
</FONT><FONT COLOR="#0000FF">Prove WB_Pred : @I:*s-&gt;*s. SimplyT I -&gt;
</FONT><FONT COLOR="#0000FF">    @A:*s. @f: @R:*s. I R -&gt; A. @P:A-&gt;*p.
</FONT><FONT COLOR="#0000FF">    WB' (\R:*s.\(~~):R-&gt;R-&gt;*p. \Inv:R-&gt;*p.\ops:I R. 
</FONT><FONT COLOR="#0000FF">                              P (f R ops))
</FONT><FONT COLOR="#000000">Intros
</FONT><FONT COLOR="#000000">Unfold WB'
</FONT><FONT COLOR="#000000">Intros
</FONT><FONT COLOR="#000000">First Sim (\X:*s. I X -&gt; A) Y Z (~) (f Y) (f Z)
</FONT><FONT COLOR="#000000">Apply parPi
</FONT><FONT COLOR="#000000">Apply SimplyT_arrow
</FONT><FONT COLOR="#000000">Assumption
</FONT><FONT COLOR="#000000">Apply SimplyT_const
</FONT><FONT COLOR="#000000">Rewrite Sim_arrow
</FONT><FONT COLOR="#000000">Rewrite Sim_const
</FONT><FONT COLOR="#000000">Intros
</FONT><FONT COLOR="#000000">Forward H8 On H1
</FONT><FONT COLOR="#000000">Lewrite H9
</FONT><FONT COLOR="#000000">Assumption
</FONT><FONT COLOR="#000000">Exit
</FONT><FONT COLOR="#000000">
</FONT><FONT COLOR="#0000FF">Prove WB_Univ : @I:*s-&gt;*s.
</FONT><FONT COLOR="#0000FF">  @A:*s. @P:A-&gt;(@R:*s. (R-&gt;R-&gt;*p)-&gt;(R-&gt;*p)-&gt;I R-&gt;*p).
</FONT><FONT COLOR="#0000FF">  (@a:A. WB' (P a)) -&gt; 
</FONT><FONT COLOR="#0000FF">  WB' (\R:*s.\(~~):R-&gt;R-&gt;*p.\Inv:R-&gt;*p.\ops:I R. 
</FONT><FONT COLOR="#0000FF">                    @a:A. P a R (~~) Inv ops)
</FONT><FONT COLOR="#000000">Intros
</FONT><FONT COLOR="#000000">Unfold WB'
</FONT><FONT COLOR="#000000">Intros
</FONT><FONT COLOR="#000000">Forward H7 On a
</FONT><FONT COLOR="#000000">Apply H On H1, H8 Then Assumption
</FONT><FONT COLOR="#000000">Exit
</FONT><FONT COLOR="#000000">
</FONT><FONT COLOR="#0000FF">Prove WB_Tw : @I:*s-&gt;*s. SimplyT I -&gt;
</FONT><FONT COLOR="#0000FF">    @f,g: @R:*s. I R -&gt; R.
</FONT><FONT COLOR="#0000FF">    WB I (\R:*s.\(~~):R-&gt;R-&gt;*p. \Inv:R-&gt;*p. \ops:I R.
</FONT><FONT COLOR="#0000FF">    f R ops ~~ g R ops)
</FONT><FONT COLOR="#000000">Intros
</FONT><FONT COLOR="#000000">Unfold WB
</FONT><FONT COLOR="#000000">Intros
</FONT><FONT COLOR="#000000">ExistsE H3
</FONT><FONT COLOR="#000000">Ande H5
</FONT><FONT COLOR="#000000">AndE H7
</FONT><FONT COLOR="#000000">AndE H9
</FONT><FONT COLOR="#000000">Forward parPi On f, (~)
</FONT><FONT COLOR="#000000">Apply SimplyT_arrow
</FONT><FONT COLOR="#000000">Assumption
</FONT><FONT COLOR="#000000">Apply SimplyT_id
</FONT><FONT COLOR="#000000">Rewrite Sim_arrow In H12
</FONT><FONT COLOR="#000000">Rewrite Sim_id In H13
</FONT><FONT COLOR="#000000">Forward H14 On H6
</FONT><FONT COLOR="#000000">Forward parPi On g, (~)
</FONT><FONT COLOR="#000000">Apply SimplyT_arrow
</FONT><FONT COLOR="#000000">Assumption
</FONT><FONT COLOR="#000000">Apply SimplyT_id
</FONT><FONT COLOR="#000000">Rewrite Sim_arrow In H16
</FONT><FONT COLOR="#000000">Forward H17 On H6
</FONT><FONT COLOR="#000000">Rewrite Sim_id In H18
</FONT><FONT COLOR="#000000">Hide H12,H13,H14,H16,H17,H18
</FONT><FONT COLOR="#000000">First LeftC (~) (f Y opsY) (f Y opsY)
</FONT><FONT COLOR="#000000">Unfold LeftC
</FONT><FONT COLOR="#000000">ExistsI f Z opsZ
</FONT><FONT COLOR="#000000">AndI Then Assumption
</FONT><FONT COLOR="#000000">Intro
</FONT><FONT COLOR="#000000">Lewrite H8 In H20
</FONT><FONT COLOR="#000000">Unfold Restr In H21 Then AndE H21
</FONT><FONT COLOR="#000000">First LeftC (~) (g Y opsY) (g Y opsY)
</FONT><FONT COLOR="#000000">Unfold LeftC
</FONT><FONT COLOR="#000000">ExistsI g Z opsZ
</FONT><FONT COLOR="#000000">AndI
</FONT><FONT COLOR="#000000">Assumption
</FONT><FONT COLOR="#000000">Assumption
</FONT><FONT COLOR="#000000">Intro
</FONT><FONT COLOR="#000000">Lewrite H8 In H24
</FONT><FONT COLOR="#000000">Unfold Restr In H25 Then AndE H25
</FONT><FONT COLOR="#000000">First LeftC (~) (f Y opsY) (g Y opsY)
</FONT><FONT COLOR="#000000">Lewrite H8
</FONT><FONT COLOR="#000000">Unfold Restr Then Repeat AndI Then Assumption
</FONT><FONT COLOR="#000000">Intro
</FONT><FONT COLOR="#000000">Unfold LeftC In H28 Then ExistsE H28
</FONT><FONT COLOR="#000000">AndE H29
</FONT><FONT COLOR="#000000">Forward H11 On H19, H31, H30
</FONT><FONT COLOR="#000000">First RightC (~) (f Z opsZ) (g Z opsZ)
</FONT><FONT COLOR="#000000">Unfold RightC
</FONT><FONT COLOR="#000000">ExistsI f Y opsY
</FONT><FONT COLOR="#000000">AndI Then Assumption
</FONT><FONT COLOR="#000000">Intro
</FONT><FONT COLOR="#000000">Lewrite H10 In H33
</FONT><FONT COLOR="#000000">Unfold Restr In H34
</FONT><FONT COLOR="#000000">AndE H34
</FONT><FONT COLOR="#000000">AndE H36
</FONT><FONT COLOR="#000000">Assumption
</FONT><FONT COLOR="#000000">Exit
</FONT><FONT COLOR="#000000">
</FONT><FONT COLOR="#0000FF">Prove WB_UnivRep : @I:*s-&gt;*s. SimplyT I -&gt;
</FONT><FONT COLOR="#0000FF">     @P:(@R:*s. (R-&gt;R-&gt;*p)-&gt;(R-&gt;*p)-&gt;I R-&gt; R-&gt;*p).
</FONT><FONT COLOR="#0000FF">     WB' (\R:*s.\(~~):R-&gt;R-&gt;*p. \Inv:R-&gt;*p.
</FONT><FONT COLOR="#0000FF">                       \ops: {|l:I R, r: R|}. 
</FONT><FONT COLOR="#0000FF">                               P R (~~) Inv ops`l ops`r) -&gt;
</FONT><FONT COLOR="#0000FF">     WB' (\R:*s.\(~~):R-&gt;R-&gt;*p. \Inv:R-&gt;*p.\ops:I R. 
</FONT><FONT COLOR="#0000FF">                        @r:R. Inv r -&gt; P R (~~) Inv ops r)
</FONT><FONT COLOR="#000000">Intros
</FONT><FONT COLOR="#000000">Unfold WB'
</FONT><FONT COLOR="#000000">Intros
</FONT><FONT COLOR="#000000">First Restr RelZ InvZ r r
</FONT><FONT COLOR="#000000">Unfold Restr
</FONT><FONT COLOR="#000000">Repeat AndI Then Try Assumption
</FONT><FONT COLOR="#000000">Unfold IsERon In H7 Then AndE H7
</FONT><FONT COLOR="#000000">Apply H10
</FONT><FONT COLOR="#000000">Assumption
</FONT><FONT COLOR="#000000">Intro
</FONT><FONT COLOR="#000000">Rewrite H5 In H10
</FONT><FONT COLOR="#000000">Unfold RightC In H11
</FONT><FONT COLOR="#000000">ExistsE H11
</FONT><FONT COLOR="#000000">Forward H1 On {l= opsY,r= y}, {l= opsZ,r= r}, H4, H5 Then Try Assumption
</FONT><FONT COLOR="#000000">Rewrite Sim_rec
</FONT><FONT COLOR="#000000">AndI
</FONT><FONT COLOR="#000000">Assumption
</FONT><FONT COLOR="#000000">Rewrite Sim_id
</FONT><FONT COLOR="#000000">AndE H12
</FONT><FONT COLOR="#000000">Assumption
</FONT><FONT COLOR="#000000">Apply H13 Then Try Assumption
</FONT><FONT COLOR="#000000">Apply H8
</FONT><FONT COLOR="#000000">AndE H12
</FONT><FONT COLOR="#000000">Forward rel_LeftC On H14, H14
</FONT><FONT COLOR="#000000">Lewrite H4 In H16
</FONT><FONT COLOR="#000000">Unfold Restr In H17
</FONT><FONT COLOR="#000000">AndE H17
</FONT><FONT COLOR="#000000">Assumption
</FONT><FONT COLOR="#000000">Exit
</FONT><FONT COLOR="#000000">
</FONT><FONT COLOR="#000000">
</FONT><FONT COLOR="#000000">----------------------------------
</FONT><FONT COLOR="#000000">----------------------------------
</FONT><FONT COLOR="#000000">--                              --
</FONT><FONT COLOR="#000000">--  6. M A I N   R E S U L T S  --
</FONT><FONT COLOR="#000000">--                              --
</FONT><FONT COLOR="#000000">----------------------------------
</FONT><FONT COLOR="#000000">----------------------------------
</FONT><FONT COLOR="#000000">
</FONT><FONT COLOR="#0000FF">Def MkUserSpec := \I:*s-&gt;*s.
</FONT><FONT COLOR="#0000FF">           \Spec:(@R:*s. (R-&gt;R-&gt;*p) -&gt; (R-&gt;*p) -&gt; I R -&gt; *p).
</FONT><FONT COLOR="#0000FF">           \imp : (Sig X:*s. I X).
</FONT><FONT COLOR="#0000FF">                ExK R:*s. Ex ops:I R.
</FONT><FONT COLOR="#0000FF">                    imp = pack I R ops /\
</FONT><FONT COLOR="#0000FF">                    Spec R ((=) R) (\r:R.True) ops :
</FONT><FONT COLOR="#0000FF">           @I:*s-&gt;*s.(@R:*s. (R-&gt;R-&gt;*p) -&gt; (R-&gt;*p) -&gt; I R -&gt; *p) -&gt;
</FONT><FONT COLOR="#0000FF">           (Sig X:*s. I X) -&gt; *p
</FONT><FONT COLOR="#000000">
</FONT><FONT COLOR="#0000FF">Def MkImplemSpec := \I:*s-&gt;*s.
</FONT><FONT COLOR="#0000FF">           \Spec:(@R:*s. (R-&gt;R-&gt;*p) -&gt; (R-&gt;*p) -&gt; I R -&gt; *p).
</FONT><FONT COLOR="#0000FF">           \R:*s. \ops:I R.
</FONT><FONT COLOR="#0000FF">                           ExR (~~) : R-&gt;R-&gt;*p. ExQ Inv:R-&gt;*p.
</FONT><FONT COLOR="#0000FF">                                Spec R (~~) Inv ops /\ 
</FONT><FONT COLOR="#0000FF">                                Bisim I R (~~) ops /\
</FONT><FONT COLOR="#0000FF">                                IsInvar I R Inv ops /\
</FONT><FONT COLOR="#0000FF">                                IsERon (~~) Inv  : 
</FONT><FONT COLOR="#0000FF">           @I:*s-&gt;*s.(@R:*s. (R-&gt;R-&gt;*p) -&gt; (R-&gt;*p) -&gt; I R -&gt; *p) -&gt;
</FONT><FONT COLOR="#0000FF">           @R:*s. I R -&gt; *p
</FONT><FONT COLOR="#000000">
</FONT><FONT COLOR="#0000FF">Prove Implem__UserSpec :
</FONT><FONT COLOR="#0000FF">     @I:*s-&gt;*s. FirstO I -&gt;
</FONT><FONT COLOR="#0000FF">     @Spec: (@R:*s.(R-&gt;R-&gt;*p) -&gt; (R-&gt;*p) -&gt; I R -&gt; *p). WB' I Spec -&gt;
</FONT><FONT COLOR="#0000FF">     @Rep:*s.@ops:I Rep.
</FONT><FONT COLOR="#0000FF">     MkImplemSpec I Spec Rep ops -&gt;
</FONT><FONT COLOR="#0000FF">     MkUserSpec I Spec (pack I Rep ops)
</FONT><FONT COLOR="#000000">Intros
</FONT><FONT COLOR="#000000">Unfold MkImplemSpec In H2
</FONT><FONT COLOR="#000000">ExistsE H2
</FONT><FONT COLOR="#000000">ExistsE H3
</FONT><FONT COLOR="#000000">AndE H4
</FONT><FONT COLOR="#000000">AndE H6
</FONT><FONT COLOR="#000000">AndE H8
</FONT><FONT COLOR="#000000">Forward exis_QuotSubsetAlg On H7, H9 Then Try Assumption
</FONT><FONT COLOR="#000000">ExistsE H11
</FONT><FONT COLOR="#000000">ExistsE H12
</FONT><FONT COLOR="#000000">Forward FirstO__SimplyT On H
</FONT><FONT COLOR="#000000">Forward WB__Sensible On H1
</FONT><FONT COLOR="#000000">Assumption
</FONT><FONT COLOR="#000000">Forward H15 On H13, H5
</FONT><FONT COLOR="#000000">Unfold MkUserSpec
</FONT><FONT COLOR="#000000">ExistsI Q
</FONT><FONT COLOR="#000000">ExistsI opsQ
</FONT><FONT COLOR="#000000">AndI
</FONT><FONT COLOR="#000000">Apply pack_QuotSubset On H13
</FONT><FONT COLOR="#000000">Assumption
</FONT><FONT COLOR="#000000">Assumption
</FONT><FONT COLOR="#000000">Exit
</FONT><FONT COLOR="#000000">
</FONT><FONT COLOR="#0000FF">Prove principle : @I:*s-&gt;*s.
</FONT><FONT COLOR="#0000FF">                  @Spec:(@Rep:*s. (Rep-&gt;Rep-&gt;*p) -&gt; (Rep-&gt;*p) -&gt; I Rep -&gt; *p).
</FONT><FONT COLOR="#0000FF">                  @imp: (Sig X:*s. I X). MkUserSpec I Spec imp -&gt;
</FONT><FONT COLOR="#0000FF">                  @A:*s. @Q:A-&gt;*p. @body:(@X:*s.I X -&gt; A). 
</FONT><FONT COLOR="#0000FF">                  (@X:*s.@ops:I X. Spec X ((=) X) (\r:X. True) ops -&gt;
</FONT><FONT COLOR="#0000FF">                                       Q (body X ops)) -&gt;
</FONT><FONT COLOR="#0000FF">                 Q (unpack imp (\X:*s.\ops:I X. body X ops))
</FONT><FONT COLOR="#000000">Intros
</FONT><FONT COLOR="#000000">Unfold MkUserSpec In H
</FONT><FONT COLOR="#000000">ExistsE H
</FONT><FONT COLOR="#000000">ExistsE H2
</FONT><FONT COLOR="#000000">AndE H3
</FONT><FONT COLOR="#000000">Rewrite H4
</FONT><FONT COLOR="#000000">Convert Q (unpack I A (pack I R ops) (\Rep1:*s.\ops1:I Rep1. body Rep1 ops1))
</FONT><FONT COLOR="#000000">Rewrite beta_Sig
</FONT><FONT COLOR="#000000">Apply H1
</FONT><FONT COLOR="#000000">Assumption
</FONT><FONT COLOR="#000000">Exit
</FONT><FONT COLOR="#000000">
</FONT></PRE>
</BODY>
</HTML>
